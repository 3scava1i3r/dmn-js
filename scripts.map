{
  "version": 3,
  "sources": [
    "node_modules/grunt-browserify/node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "node_modules/lodash.defaults/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.assign/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.assign/node_modules/lodash._baseassign/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.assign/node_modules/lodash._baseassign/node_modules/lodash._basecopy/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.assign/node_modules/lodash._createassigner/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.assign/node_modules/lodash._createassigner/node_modules/lodash._bindcallback/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.assign/node_modules/lodash._createassigner/node_modules/lodash._isiterateecall/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.assign/node_modules/lodash.keys/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.assign/node_modules/lodash.keys/node_modules/lodash._getnative/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.assign/node_modules/lodash.keys/node_modules/lodash.isarguments/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.assign/node_modules/lodash.keys/node_modules/lodash.isarray/index.js",
    "node_modules/lodash.defaults/node_modules/lodash.restparam/index.js",
    "scripts/cell-data.js",
    "scripts/cell-view.js",
    "scripts/choice-view.js",
    "scripts/clause-data.js",
    "scripts/clause-label-view.js",
    "scripts/clause-mapping-view.js",
    "scripts/clause-value-view.js",
    "scripts/clause-view.js",
    "scripts/clauseexpression-setter-view.js",
    "scripts/clausevalues-setter-view.js",
    "scripts/combobox-view.js",
    "scripts/context-views-mixin.js",
    "scripts/contextmenu-view.js",
    "scripts/decision-table-view.js",
    "scripts/index.js",
    "scripts/input-data.js",
    "scripts/keybus.js",
    "scripts/output-data.js",
    "scripts/rule-data.js",
    "scripts/rule-view.js",
    "scripts/suggestions-view.js",
    "scripts/table-data.js"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACldA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "/**\n * lodash 3.1.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar assign = require('lodash.assign'),\n    restParam = require('lodash.restparam');\n\n/**\n * Used by `_.defaults` to customize its `_.assign` use.\n *\n * @private\n * @param {*} objectValue The destination object property value.\n * @param {*} sourceValue The source object property value.\n * @returns {*} Returns the value to assign to the destination object.\n */\nfunction assignDefaults(objectValue, sourceValue) {\n  return objectValue === undefined ? sourceValue : objectValue;\n}\n\n/**\n * Assigns own enumerable properties of source object(s) to the destination\n * object for all destination properties that resolve to `undefined`. Once a\n * property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * _.defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });\n * // => { 'user': 'barney', 'age': 36 }\n */\nvar defaults = restParam(function(args) {\n  var object = args[0];\n  if (object == null) {\n    return object;\n  }\n  args.push(assignDefaults);\n  return assign.apply(undefined, args);\n});\n\nmodule.exports = defaults;\n",
    "/**\n * lodash 3.2.0 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar baseAssign = require('lodash._baseassign'),\n    createAssigner = require('lodash._createassigner'),\n    keys = require('lodash.keys');\n\n/**\n * A specialized version of `_.assign` for customizing assigned values without\n * support for argument juggling, multiple sources, and `this` binding `customizer`\n * functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n */\nfunction assignWith(object, source, customizer) {\n  var index = -1,\n      props = keys(source),\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key],\n        result = customizer(value, source[key], key, object, source);\n\n    if ((result === result ? (result !== value) : (value === value)) ||\n        (value === undefined && !(key in object))) {\n      object[key] = result;\n    }\n  }\n  return object;\n}\n\n/**\n * Assigns own enumerable properties of source object(s) to the destination\n * object. Subsequent sources overwrite property assignments of previous sources.\n * If `customizer` is provided it is invoked to produce the assigned values.\n * The `customizer` is bound to `thisArg` and invoked with five arguments:\n * (objectValue, sourceValue, key, object, source).\n *\n * **Note:** This method mutates `object` and is based on\n * [`Object.assign`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.assign).\n *\n * @static\n * @memberOf _\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {*} [thisArg] The `this` binding of `customizer`.\n * @returns {Object} Returns `object`.\n * @example\n *\n * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });\n * // => { 'user': 'fred', 'age': 40 }\n *\n * // using a customizer callback\n * var defaults = _.partialRight(_.assign, function(value, other) {\n *   return _.isUndefined(value) ? other : value;\n * });\n *\n * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });\n * // => { 'user': 'barney', 'age': 36 }\n */\nvar assign = createAssigner(function(object, source, customizer) {\n  return customizer\n    ? assignWith(object, source, customizer)\n    : baseAssign(object, source);\n});\n\nmodule.exports = assign;\n",
    "/**\n * lodash 3.2.0 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar baseCopy = require('lodash._basecopy'),\n    keys = require('lodash.keys');\n\n/**\n * The base implementation of `_.assign` without support for argument juggling,\n * multiple sources, and `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return source == null\n    ? object\n    : baseCopy(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n",
    "/**\n * lodash 3.0.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction baseCopy(source, props, object) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n    object[key] = source[key];\n  }\n  return object;\n}\n\nmodule.exports = baseCopy;\n",
    "/**\n * lodash 3.1.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar bindCallback = require('lodash._bindcallback'),\n    isIterateeCall = require('lodash._isiterateecall'),\n    restParam = require('lodash.restparam');\n\n/**\n * Creates a function that assigns properties of source object(s) to a given\n * destination object.\n *\n * **Note:** This function is used to create `_.assign`, `_.defaults`, and `_.merge`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return restParam(function(object, sources) {\n    var index = -1,\n        length = object == null ? 0 : sources.length,\n        customizer = length > 2 ? sources[length - 2] : undefined,\n        guard = length > 2 ? sources[2] : undefined,\n        thisArg = length > 1 ? sources[length - 1] : undefined;\n\n    if (typeof customizer == 'function') {\n      customizer = bindCallback(customizer, thisArg, 5);\n      length -= 2;\n    } else {\n      customizer = typeof thisArg == 'function' ? thisArg : undefined;\n      length -= (customizer ? 1 : 0);\n    }\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n",
    "/**\n * lodash 3.0.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/**\n * A specialized version of `baseCallback` which only supports `this` binding\n * and specifying the number of arguments to provide to `func`.\n *\n * @private\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {number} [argCount] The number of arguments to provide to `func`.\n * @returns {Function} Returns the callback.\n */\nfunction bindCallback(func, thisArg, argCount) {\n  if (typeof func != 'function') {\n    return identity;\n  }\n  if (thisArg === undefined) {\n    return func;\n  }\n  switch (argCount) {\n    case 1: return function(value) {\n      return func.call(thisArg, value);\n    };\n    case 3: return function(value, index, collection) {\n      return func.call(thisArg, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(thisArg, accumulator, value, index, collection);\n    };\n    case 5: return function(value, other, key, object, source) {\n      return func.call(thisArg, value, other, key, object, source);\n    };\n  }\n  return function() {\n    return func.apply(thisArg, arguments);\n  };\n}\n\n/**\n * This method returns the first argument provided to it.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'user': 'fred' };\n *\n * _.identity(object) === object;\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = bindCallback;\n",
    "/**\n * lodash 3.0.9 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^\\d+$/;\n\n/**\n * Used as the [maximum length](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\n/**\n * Checks if `value` is array-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value));\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\n/**\n * Checks if the provided arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n      ? (isArrayLike(object) && isIndex(index, object.length))\n      : (type == 'string' && index in object)) {\n    var other = object[index];\n    return value === value ? (value === other) : (other !== other);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is based on [`ToLength`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength).\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(1);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isIterateeCall;\n",
    "/**\n * lodash 3.1.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar getNative = require('lodash._getnative'),\n    isArguments = require('lodash.isarguments'),\n    isArray = require('lodash.isarray');\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^\\d+$/;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = getNative(Object, 'keys');\n\n/**\n * Used as the [maximum length](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\n/**\n * Checks if `value` is array-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value));\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is based on [`ToLength`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength).\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * A fallback implementation of `Object.keys` which creates an array of the\n * own enumerable property names of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction shimKeys(object) {\n  var props = keysIn(object),\n      propsLength = props.length,\n      length = propsLength && object.length;\n\n  var allowIndexes = !!length && isLength(length) &&\n    (isArray(object) || isArguments(object));\n\n  var index = -1,\n      result = [];\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(1);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nvar keys = !nativeKeys ? shimKeys : function(object) {\n  var Ctor = object == null ? null : object.constructor;\n  if ((typeof Ctor == 'function' && Ctor.prototype === object) ||\n      (typeof object != 'function' && isArrayLike(object))) {\n    return shimKeys(object);\n  }\n  return isObject(object) ? nativeKeys(object) : [];\n};\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  if (object == null) {\n    return [];\n  }\n  if (!isObject(object)) {\n    object = Object(object);\n  }\n  var length = object.length;\n  length = (length && isLength(length) &&\n    (isArray(object) || isArguments(object)) && length) || 0;\n\n  var Ctor = object.constructor,\n      index = -1,\n      isProto = typeof Ctor == 'function' && Ctor.prototype === object,\n      result = Array(length),\n      skipIndexes = length > 0;\n\n  while (++index < length) {\n    result[index] = (index + '');\n  }\n  for (var key in object) {\n    if (!(skipIndexes && isIndex(key, length)) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keys;\n",
    "/**\n * lodash 3.9.0 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]';\n\n/**\n * Used to match `RegExp` [special characters](http://www.regular-expressions.info/characters.html#special).\n * In addition to special characters the forward slash is escaped to allow for\n * easier `eval` use and `Function` compilation.\n */\nvar reRegExpChars = /[.*+?^${}()|[\\]\\/\\\\]/g,\n    reHasRegExpChars = RegExp(reRegExpChars.source);\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` or `undefined` values.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  if (typeof value == 'string') {\n    return value;\n  }\n  return value == null ? '' : (value + '');\n}\n\n/**\n * Checks if `value` is object-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar fnToString = Function.prototype.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  escapeRegExp(fnToString.call(hasOwnProperty))\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = object == null ? undefined : object[key];\n  return isNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (objToString.call(value) == funcTag) {\n    return reIsNative.test(fnToString.call(value));\n  }\n  return isObjectLike(value) && reIsHostCtor.test(value);\n}\n\n/**\n * Escapes the `RegExp` special characters \"\\\", \"/\", \"^\", \"$\", \".\", \"|\", \"?\",\n * \"*\", \"+\", \"(\", \")\", \"[\", \"]\", \"{\" and \"}\" in `string`.\n *\n * @static\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '\\[lodash\\]\\(https:\\/\\/lodash\\.com\\/\\)'\n */\nfunction escapeRegExp(string) {\n  string = baseToString(string);\n  return (string && reHasRegExpChars.test(string))\n    ? string.replace(reRegExpChars, '\\\\$&')\n    : string;\n}\n\nmodule.exports = getNative;\n",
    "/**\n * lodash 3.0.3 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * Checks if `value` is object-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Used as the [maximum length](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\n/**\n * Checks if `value` is array-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value));\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is based on [`ToLength`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength).\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is classified as an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  return isObjectLike(value) && isArrayLike(value) && objToString.call(value) == argsTag;\n}\n\nmodule.exports = isArguments;\n",
    "/**\n * lodash 3.0.3 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar arrayTag = '[object Array]',\n    funcTag = '[object Function]';\n\n/**\n * Used to match `RegExp` [special characters](http://www.regular-expressions.info/characters.html#special).\n * In addition to special characters the forward slash is escaped to allow for\n * easier `eval` use and `Function` compilation.\n */\nvar reRegExpChars = /[.*+?^${}()|[\\]\\/\\\\]/g,\n    reHasRegExpChars = RegExp(reRegExpChars.source);\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` or `undefined` values.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  if (typeof value == 'string') {\n    return value;\n  }\n  return value == null ? '' : (value + '');\n}\n\n/**\n * Checks if `value` is object-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar fnToString = Function.prototype.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  escapeRegExp(fnToString.call(hasOwnProperty))\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeIsArray = getNative(Array, 'isArray');\n\n/**\n * Used as the [maximum length](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = object == null ? undefined : object[key];\n  return isNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is based on [`ToLength`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength).\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(function() { return arguments; }());\n * // => false\n */\nvar isArray = nativeIsArray || function(value) {\n  return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;\n};\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (objToString.call(value) == funcTag) {\n    return reIsNative.test(fnToString.call(value));\n  }\n  return isObjectLike(value) && reIsHostCtor.test(value);\n}\n\n/**\n * Escapes the `RegExp` special characters \"\\\", \"/\", \"^\", \"$\", \".\", \"|\", \"?\",\n * \"*\", \"+\", \"(\", \")\", \"[\", \"]\", \"{\" and \"}\" in `string`.\n *\n * @static\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '\\[lodash\\]\\(https:\\/\\/lodash\\.com\\/\\)'\n */\nfunction escapeRegExp(string) {\n  string = baseToString(string);\n  return (string && reHasRegExpChars.test(string))\n    ? string.replace(reRegExpChars, '\\\\$&')\n    : string;\n}\n\nmodule.exports = isArray;\n",
    "/**\n * lodash 3.6.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.restParam(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction restParam(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        rest = Array(length);\n\n    while (++index < length) {\n      rest[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, args[0], rest);\n      case 2: return func.call(this, args[0], args[1], rest);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = rest;\n    return func.apply(this, otherArgs);\n  };\n}\n\nmodule.exports = restParam;\n",
    "'use strict';\n/*global module: false, deps: true, require: false*/\n\nif (typeof window === 'undefined') { var deps = require; }\nelse { var deps = window.deps; }\n\nvar State = deps('ampersand-state');\nvar Collection = deps('ampersand-collection');\n\nvar CellModel = State.extend({\n  props: {\n    value: 'string'\n  },\n\n  session: {\n    editable: {\n      type: 'boolean',\n      default: true\n    }\n  },\n\n  derived: {\n    rule: {\n      deps: [\n        'collection',\n        'collection.parent'\n      ],\n      fn: function () {\n        return this.collection.parent;\n      }\n    },\n\n\n    table: {\n      deps: [\n        'rule.collection',\n        'rule.collection.parent'\n      ],\n      cache: false,\n      fn: function () {\n        return this.rule.collection.parent;\n      }\n    },\n\n    x: {\n      deps: [\n        'collection'\n      ],\n      cache: false,\n      fn: function () {\n        var cell = this;\n        var cells = cell.collection;\n        return cells.indexOf(cell);\n      }\n    },\n\n    y: {\n      deps: [\n        'rule',\n        'rule.collection'\n      ],\n      cache: false,\n      fn: function () {\n        var rules = this.rule.collection;\n        return rules.indexOf(this.rule);\n      }\n    },\n\n    focused: {\n      deps: [\n        'table',\n        'table.x',\n        'table.y',\n        'x',\n        'y'\n      ],\n      cache: false,\n      fn: function () {\n        return this.x === this.table.x && this.y === this.table.y;\n      }\n    },\n\n    clauseDelta: {\n      deps: [\n        'table',\n        'collection',\n        'table.inputs',\n        'table.outputs'\n      ],\n      fn: function () {\n        var delta = this.collection.indexOf(this);\n        var inputs = this.table.inputs.length;\n        var outputs = this.table.inputs.length + this.table.outputs.length;\n\n        if (delta < inputs) {\n          return delta;\n        }\n        else if (delta < outputs) {\n          return delta - inputs;\n        }\n\n        return 0;\n      }\n    },\n\n    type: {\n      deps: [\n        'table',\n        'collection',\n        'table.inputs',\n        'table.outputs'\n      ],\n      cache: false,\n      fn: function () {\n        var delta = this.collection.indexOf(this);\n        var inputs = this.table.inputs.length;\n        var outputs = this.table.inputs.length + this.table.outputs.length;\n\n        if (delta < inputs) {\n          return 'input';\n        }\n        else if (delta < outputs) {\n          return 'output';\n        }\n\n        return 'annotation';\n      }\n    },\n\n    clause: {\n      deps: [\n        'table',\n        'collection',\n        'collection.length',\n        'type',\n        'clauseDelta'\n      ],\n      cache: false,\n      fn: function () {\n        if (this.clauseDelta < 0 || this.type === 'annotation') { return; }\n        var clause = this.table[this.type +'s'].at(this.clauseDelta);\n        return clause;\n      }\n    },\n\n    choices: {\n      deps: [\n        'table',\n        'collection.length',\n        'type',\n        'clause',\n        'clauseDelta'\n      ],\n      cache: false,\n      fn: function () {\n        if (!this.clause || !this.clause.choices) { return; }\n        return this.clause.choices.map(function (val) {\n          return {value: val};\n        });\n      }\n    }\n  }\n});\n\nmodule.exports = {\n  Model: CellModel,\n  Collection: Collection.extend({\n    model: CellModel\n  })\n};\n",
    "'use strict';\n/* global require: false, module: false, deps: false */\n\nvar View = deps('ampersand-view');\nvar merge = deps('lodash.merge');\n\n\nvar ChoiceView = require('./choice-view');\nvar RuleCellView = View.extend(merge({}, ChoiceView.prototype, {\n  template: '<td><span contenteditable></span></td>',\n\n  bindings: merge({}, ChoiceView.prototype.bindings, {\n    'model.value': {\n      type: 'text',\n      selector: '[contenteditable]'\n    },\n\n    'model.editable': {\n      type: 'booleanAttribute',\n      name: 'contenteditable',\n      selector: '[contenteditable]'\n    },\n\n    'model.spellchecked': {\n      type: 'booleanAttribute',\n      name: 'spellcheck',\n      selector: '[contenteditable]'\n    },\n\n    'model.type': {\n      type: 'class'\n    }\n  }),\n\n  events: merge({}, ChoiceView.prototype.events, {\n    'contextmenu':                    '_handleContextMenu',\n    'contextmenu [contenteditable]':  '_handleContextMenu',\n    'click':                          '_handleClick',\n    'click [contenteditable]':        '_handleClick'\n  }),\n\n  _focusPseudo: function () {\n    var el = this.editableEl();\n    if (!el) {\n      return;\n    }\n\n    el.focus();\n  },\n\n  _handleFocus: function () {\n    ChoiceView.prototype._handleFocus.apply(this, arguments);\n\n    var table = this.model.table;\n    var cell = this.model;\n    var cells = cell.collection;\n    var rule = cells.parent;\n    var rules = table.rules;\n\n    var x = cells.indexOf(cell);\n    var y = rules.indexOf(rule);\n\n    if (table.x !== x || table.y !== y) {\n      table.set({\n        x: x,\n        y: y\n      }, {\n        // silent: true\n      });\n      table.trigger('change:focus');\n    }\n\n    this.parent.parent.hideContextMenu();\n  },\n\n  _handleClick: function () {\n    this.parent.parent.hideContextMenu();\n    this._focusPseudo();\n  },\n\n  _handleContextMenu: function (evt) {\n    this.parent.parent.showContextMenu(this.model, evt);\n  },\n\n  setFocus: function () {\n    if (!this.el) { return; }\n\n    if (this.model.focused) {\n      this.el.classList.add('focused');\n\n      if (this.parent.parent.contextMenu) {\n        this.parent.parent.contextMenu.close();\n      }\n\n      if (this.parent.parent.clauseValuesEditor) {\n        this.parent.parent.clauseValuesEditor.hide();\n      }\n\n      if (this.parent.parent.clauseExpressionEditor) {\n        this.parent.parent.clauseExpressionEditor.hide();\n      }\n\n      if (Element.prototype.contains && document.activeElement.contains(this.editableEl())) {\n        this._focusPseudo();\n      }\n    }\n    else {\n      this.el.classList.remove('focused');\n    }\n\n    if (this.model.x === this.model.table.x) {\n      this.el.classList.add('col-focused');\n    }\n    else {\n      this.el.classList.remove('col-focused');\n    }\n\n    if (this.model.y === this.model.table.y) {\n      this.el.classList.add('row-focused');\n    }\n    else {\n      this.el.classList.remove('row-focused');\n    }\n  },\n\n  initialize: function () {\n    this.on('change:el', this.setFocus);\n    this.listenToAndRun(this.model.table, 'change:focus', this.setFocus);\n  }\n}));\n\n\n\nvar RuleInputCellView = RuleCellView.extend({});\n\nvar RuleOutputCellView = RuleCellView.extend({});\n\nvar RuleAnnotationCellView = RuleCellView.extend({});\n\n\n\nmodule.exports = {\n  Cell:       RuleCellView,\n  Input:      RuleInputCellView,\n  Output:     RuleOutputCellView,\n  Annotation: RuleAnnotationCellView\n};\n",
    "'use strict';\n/* global deps: false, require: false, module: false */\nvar View = deps('ampersand-view');\nvar keyBus = require('./keybus');\n\nvar SuggestionsView = require('./suggestions-view');\n\nvar suggestionsView = SuggestionsView.instance();\n\nvar specialKeys = Object.keys(keyBus.keyCodes);\n\nvar ChoiceView = View.extend({\n  collections: {\n    choices: SuggestionsView.Collection\n  },\n\n  events: {\n    keyup: '_handleInput',\n    'keyup [contenteditable]': '_handleInput',\n    focus: '_handleFocus',\n    'focus [contenteditable]': '_handleFocus'\n  },\n\n  session: {\n    valid:          {\n      default: true,\n      type: 'boolean'\n    },\n\n    originalValue:  'string'\n  },\n\n  derived: {\n    isOriginal: {\n      deps: ['model.value', 'originalValue'],\n      fn: function () {\n        return this.model.value === this.originalValue;\n      }\n    }\n  },\n\n  bindings: {\n    'model.value': {\n      type: function (el, value) {\n        if (!value || !value.trim()) { return; }\n        this.el.textContent = value.trim();\n      }\n    },\n\n    'model.focused': {\n      type: 'booleanClass',\n      name: 'focused'\n    },\n\n    isOriginal: {\n      type: 'booleanClass',\n      name: 'untouched'\n    }\n  },\n\n  editableEl: function () {\n    return this.query('[contenteditable]') || this.el;\n  },\n\n  initialize: function (options) {\n    options = options || {};\n    if (this.el) {\n      this.el.contentEditable = true;\n      this.el.spellcheck = false;\n      this.originalValue = this.value = this.el.textContent.trim();\n    }\n    else {\n      this.originalValue = this.value;\n    }\n\n\n    this.listenToAndRun(this.model, 'change:choices', function () {\n      var choices = this.model.choices;\n      if (!this.choices) {\n        return;\n      }\n      if (!choices) {\n        choices = [];\n      }\n\n      this.choices.reset(choices.map(function (choice) {\n        return {value: choice};\n      }));\n    });\n\n    this.suggestions = new SuggestionsView.Collection({\n      parent: this.choices\n    });\n  },\n\n  _filter: function (val) {\n    var choices = this.model.choices || this.choices;\n    var el = this.editableEl();\n    var filtered = choices\n          .filter(function (choice) {\n            return choice.value.indexOf(val) === 0;\n          })\n          .map(function (choice) {\n            var chars = el.textContent.length;\n            var val = choice.escape ? choice.escape('value') : choice.value;\n            var htmlStr = '<span class=\"highlighted\">' + val.slice(0, chars) + '</span>';\n            htmlStr += val.slice(chars);\n            return {\n              value: choice.value,\n              html: htmlStr\n            };\n          }, this);\n    return filtered;\n  },\n\n  _handleFocus: function (evt) {\n    this._handleInput(evt);\n  },\n\n  _handleResize: function () {\n    if (!this.el || !suggestionsView) { return; }\n    var node = this.el;\n    var top = node.offsetTop;\n    var left = node.offsetLeft;\n    var helper = suggestionsView.el;\n\n    while ((node = node.offsetParent)) {\n      if (node.offsetTop) {\n        top += parseInt(node.offsetTop, 10);\n      }\n      if (node.offsetLeft) {\n        left += parseInt(node.offsetLeft, 10);\n      }\n    }\n\n    top -= helper.clientHeight;\n    helper.style.top = top;\n    helper.style.left = left;\n  },\n\n  _handleInput: function (evt) {\n    if (evt && (specialKeys.indexOf(evt.keyCode) > -1 || evt.ctrlKey)) {\n      return;\n    }\n    var el = this.editableEl();\n    var val = el.textContent.trim();\n\n    var filtered = this._filter(val);\n    suggestionsView.show(filtered, this);\n    this._handleResize();\n\n    if (filtered.length === 1) {\n      if (evt) {\n        evt.preventDefault();\n      }\n\n      var matching = filtered[0].value;\n      this.model.set({\n        value: matching\n      }, {\n        silent: true\n      });\n      el.textContent = matching;\n    }\n  }\n});\n\nmodule.exports = ChoiceView;\n",
    "'use strict';\n/*global module: false, deps: true, require: false*/\n\nif (typeof window === 'undefined') { var deps = require; }\nelse { var deps = window.deps; }\n\nvar State = deps('ampersand-state');\nvar Collection = deps('ampersand-collection');\n\nvar ClauseModel = State.extend({\n  props: {\n    label:        'string',\n    choices:      'array',\n    datatype:     {type: 'string', default: 'string'},\n    expression:   {\n      type: 'string',\n      test: function (val) {\n        if (/[^a-z0-9-_]+/ig.test(val)) {\n          return 'only alphanumeric charachters are allowed';\n        }\n      }\n    }\n  },\n\n  session: {\n    editable: {\n      type: 'boolean',\n      default: true\n    }\n  }\n});\n\nmodule.exports = {\n  Model: ClauseModel,\n  Collection: Collection.extend({\n    model: ClauseModel\n  })\n};\n",
    "'use strict';\n/* global require: false, module: false, deps: false */\n\nvar View = deps('ampersand-view');\nvar merge = deps('lodash.merge');\nvar contextViewsMixin = require('./context-views-mixin');\n\n\nvar LabelView = View.extend(merge({}, {\n  events: {\n    'focus':                          '_handleFocus',\n    'focus [contenteditable]':        '_handleFocus',\n    'click':                          '_handleFocus',\n    'click [contenteditable]':        '_handleFocus',\n    'input':                          '_handleInput',\n    'input [contenteditable]':        '_handleInput',\n    'contextmenu':                    '_handleContextMenu',\n    'contextmenu [contenteditable]':  '_handleContextMenu',\n  },\n\n  derived: merge({}, contextViewsMixin, {\n    table: {\n      deps: [\n        'model',\n        'model.collection',\n        'model.collection.parent'\n      ],\n      cache: false,\n      fn: function () {\n        return this.model.collection.parent;\n      }\n    }\n  }),\n\n  bindings: {\n    'model.label': {\n      type: function (el, val) {\n        var editable = this.editableEl();\n        if (document.activeElement === editable) { return; }\n        editable.textContent = (val || '').trim();\n      }\n    }\n  },\n\n  editableEl: function () {\n    return this.query('[contenteditable]') || this.el;\n  },\n\n  _handleFocus: function () {\n    this.contextMenu.close();\n    this.clauseExpressionEditor.hide();\n    this.clauseValuesEditor.hide();\n    this.table.x = this.model.x;\n    this.table.trigger('change:focus');\n  },\n\n  _handleInput: function () {\n    this.model.label = this.editableEl().textContent.trim();\n    this._handleFocus();\n  },\n\n  _handleContextMenu: function (evt) {\n    var type = this.model.clauseType;\n    var table = this.table;\n    this._handleFocus();\n\n    var addMethod = type === 'input' ? 'addInput' : 'addOutput';\n\n    this.contextMenu.open({\n      parent: this,\n      top: evt.pageY,\n      left: evt.pageX,\n      commands: [\n        {\n          label: type === 'input' ? 'Input' : 'Output',\n          icon: type,\n          className: type,\n          subcommands: [\n            {\n              label: 'add',\n              icon: 'plus',\n              fn: function () {\n                table[addMethod]();\n              },\n              subcommands: [\n                {\n                  label: 'before',\n                  icon: 'left',\n                  fn: function () {\n                    table[addMethod]();\n                  }\n                },\n                {\n                  label: 'after',\n                  icon: 'right',\n                  fn: function () {\n                    table[addMethod]();\n                  }\n                }\n              ]\n            },\n            {\n              label: 'copy',\n              // icon: 'plus',\n              fn: function () {},\n              subcommands: [\n                {\n                  label: 'before',\n                  icon: 'left',\n                  fn: function () {}\n                },\n                {\n                  label: 'after',\n                  icon: 'right',\n                  fn: function () {}\n                }\n              ]\n            },\n            {\n              label: 'move',\n              // icon: 'plus',\n              fn: function () {},\n              subcommands: [\n                {\n                  label: 'before',\n                  icon: 'left',\n                  fn: function () {}\n                },\n                {\n                  label: 'after',\n                  icon: 'right',\n                  fn: function () {}\n                }\n              ]\n            },\n            {\n              label: 'remove',\n              icon: 'minus',\n              fn: function () {}\n            }\n          ]\n        }\n      ]\n    });\n\n    try {\n      evt.preventDefault();\n    } catch (e) {}\n  },\n\n  initialize: function () {\n    var editable = document.createElement('span');\n    editable.setAttribute('contenteditable', true);\n    editable.textContent = (this.model.label || '').trim();\n    this.el.innerHTML = '';\n    this.el.appendChild(editable);\n  }\n}));\n\n\nmodule.exports = LabelView;\n",
    "'use strict';\n/* global module: false, deps: false, require: false */\n\nvar View = deps('ampersand-view');\nvar merge = deps('lodash.merge');\nvar contextViewsMixin = require('./context-views-mixin');\n\n\n\nvar MappingView = View.extend(merge({}, {\n  events: {\n    'click': '_handleClick',\n    'keyup [contenteditable]': '_handleKeyup'\n  },\n\n  derived: merge({}, contextViewsMixin, {\n    table: {\n      deps: [\n        'model',\n        'model.collection',\n        'model.collection.parent'\n      ],\n      cache: false,\n      fn: function () {\n        return this.model.collection.parent;\n      }\n    }\n  }),\n\n  bindings: {\n    'model.mapping': [\n      {\n        type: 'text'\n      },\n      {\n        type: 'attribute',\n        name: 'title'\n      }\n    ],\n    'model.expression': {\n      type: function (el, value) {\n        if (el === document.activeElement) {\n          return;\n        }\n        el.textContent = value.trim();\n      },\n      selector: '[contenteditable]'\n    },\n\n    error: [\n      {\n        type: 'booleanClass',\n        name: 'invalid'\n      },\n      {\n        type: 'attribute',\n        name: 'title'\n      }\n    ]\n  },\n\n  session: {\n    error: 'string'\n  },\n\n  _handleClick: function () {\n    this.contextMenu.close();\n    if (this.model.clauseType === 'input') {\n      this.clauseExpressionEditor.show(this.model, this);\n    }\n    else {\n      this.clauseExpressionEditor.hide();\n    }\n    this.clauseValuesEditor.hide();\n  },\n\n  _handleKeyup: function (evt) {\n    try {\n      this.model.expression = evt.target.textContent.trim();\n      if (this.error) {\n        this.error = false;\n      }\n    }\n    catch (err) {\n      if (!this.error) {\n        this.error = err.message;\n      }\n    }\n  },\n\n  initialize: function () {\n    var val = (this.model.mapping || '').trim();\n\n    if (this.model.clauseType !== 'input') {\n      this.el.innerHTML = '<span contenteditable spellcheck=\"false\">' + val + '</span>';\n    }\n    else {\n      this.el.textContent = val;\n    }\n  }\n}));\n\nmodule.exports = MappingView;\n",
    "'use strict';\n/* global require: false, module: false, deps: false */\n\nvar View = deps('ampersand-view');\nvar merge = deps('lodash.merge');\nvar contextViewsMixin = require('./context-views-mixin');\n\nvar ValueView = View.extend(merge({}, {\n  events: {\n    'click': '_handleClick'\n  },\n\n  derived: merge({}, contextViewsMixin, {\n    table: {\n      deps: [\n        'model',\n        'model.collection',\n        'model.collection.parent'\n      ],\n      cache: false,\n      fn: function () {\n        return this.model.collection.parent;\n      }\n    }\n  }),\n\n  bindings: {\n    'model.choices': {\n      type: function (el) {\n        this._renderContent(el);\n      }\n    },\n    'model.datatype': {\n      type: function (el) {\n        this._renderContent(el);\n      }\n    }\n  },\n\n  _handleClick: function () {\n    this.contextMenu.close();\n    this.clauseExpressionEditor.hide();\n    this.clauseValuesEditor.show(this.model.datatype, this.model.choices, this);\n  },\n\n  _renderContent: function (el) {\n    var str = '';\n    var val = this.model.choices;\n    if (Array.isArray(val) && val.length) {\n      str = '(' + val.join(', ') + ')';\n    }\n    else {\n      str = this.model.datatype;\n    }\n    el.textContent = str;\n  }\n}));\n\n\n\n\nmodule.exports = ValueView;\n",
    "'use strict';\n/* global require: false, module: false, deps: false */\n\nvar View = deps('ampersand-view');\nvar LabelView = require('./clause-label-view');\nvar ValueView = require('./clause-value-view');\nvar MappingView = require('./clause-mapping-view');\n\n\n\n\n\nvar requiredElement = {\n  type: 'element',\n  required: true\n};\n\nvar ClauseView = View.extend({\n  session: {\n    labelEl:    requiredElement,\n    mappingEl:  requiredElement,\n    valueEl:    requiredElement\n  },\n\n  derived: {\n    table: {\n      deps: [\n        'model',\n        'model.collection',\n        'model.collection.parent'\n      ],\n      cache: false,\n      fn: function () {\n        return this.model.collection.parent;\n      }\n    }\n  },\n\n  initialize: function () {\n    var clause = this.model;\n    var self = this;\n\n    var subviews = {\n      label:    LabelView,\n      mapping:  MappingView,\n      value:    ValueView\n    };\n\n    Object.keys(subviews).forEach(function (kind) {\n      this.listenToAndRun(this.model, 'change:' + kind, function () {\n        if (this[kind + 'View']) {\n          this.stopListening(this[kind + 'View']);\n        }\n\n        this[kind + 'View'] = new subviews[kind]({\n          parent: this,\n          model:  clause,\n          el:     this[kind + 'El']\n        });\n      });\n    }, this);\n\n    function tableChangeFocus() {\n      if (self.model.focused) {\n        self.labelEl.classList.add('col-focused');\n        self.mappingEl.classList.add('col-focused');\n        self.valueEl.classList.add('col-focused');\n      }\n      else {\n        self.labelEl.classList.remove('col-focused');\n        self.mappingEl.classList.remove('col-focused');\n        self.valueEl.classList.remove('col-focused');\n      }\n    }\n    this.table.on('change:focus', tableChangeFocus);\n    tableChangeFocus();\n  }\n});\n\n\n\n\nmodule.exports = ClauseView;\n",
    "'use strict';\n/* global module: false, deps: false, require: false */\n\nvar View = deps('ampersand-view');\nvar Collection = deps('ampersand-collection');\nvar State = deps('ampersand-state');\nvar ComboBoxView = require('./combobox-view');\n\n\nfunction elBox(el) {\n  var node = el;\n  var box = {\n    top: el.offsetTop,\n    left: el.offsetLeft,\n    width: el.offsetWidth,\n    height: el.offsetHeight\n  };\n\n  while ((node = node.offsetParent)) {\n    if (node.offsetTop) {\n      box.top += parseInt(node.offsetTop, 10);\n    }\n    if (node.offsetLeft) {\n      box.left += parseInt(node.offsetLeft, 10);\n    }\n  }\n\n  return box;\n}\n\n\nvar LanguagesCollection = Collection.extend({\n  last: function () {\n    return this.models[this.models.length - 1];\n  },\n\n  restripe: function () {\n    var models = this.filter(function (model) {\n      return model.value;\n    });\n\n    models.push({\n      value: ''\n    });\n\n    this.reset(models);\n\n    return this;\n  },\n\n  model: State.extend({\n    props: {\n      value: 'string'\n    },\n\n    initialize: function () {\n      this.on('change:value', function () {\n        this.collection.restripe();\n      });\n    }\n  })\n});\n\n\n\n\n\n\n\n\nvar LanguagesCollection = Collection.extend({\n  mainIndex: 'value',\n  model: State.extend({\n    props: {\n      value: 'string',\n      placeholder: 'string'\n    }\n  })\n});\n\n\n\n\nvar defaultLanguage = [\n  {\n    value: 'Javascript',\n    placeholder: 'return obj.propertyName;'\n  },\n  {\n    value: 'Groovy'\n  },\n  {\n    value: 'Python'\n  },\n  {\n    value: 'Ruby'\n  }\n];\n\n\nvar ClauseExpressionView = View.extend({\n  template: '<div class=\"dmn-clauseexpression-setter\">' +\n              '<div class=\"expression region\">' +\n                '<div class=\"row link\">' +\n                  '<a class=\"toggle-script use-script\">Use script</a>' +\n                  '<span class=\"icon-dmn icon-clear\"></span>' +\n                '</div>' +\n\n                '<div class=\"row fields\">' +\n                  '<label>Expression:</label>' +\n                  '<input placeholder=\"${propertyName}\" />' +\n                '</div>' +\n              '</div>' +\n\n              '<div class=\"script region\">' +\n                '<div class=\"row link\">' +\n                  '<a class=\"toggle-script use-expression\">Use expression</a>' +\n                  '<span class=\"icon-dmn icon-clear\"></span>' +\n                '</div>' +\n\n                '<div class=\"row fields\">' +\n                  '<div class=\"language\"></div>' +\n                  '<textarea></textarea>' +\n                '</div>' +\n              '</div>' +\n            '</div>',\n\n  subviews: {\n    languageView: {\n      container: '.language',\n      prepareView: function (el) {\n        var comboboxView = new ComboBoxView({\n          parent:     this,\n          collection: this.languages,\n          value:      this.language,\n          label:      'Language:',\n          className:  el.className\n        });\n\n        var cbEl = comboboxView.render().el;\n        el.parentNode.replaceChild(cbEl, el);\n\n        this.listenTo(comboboxView, 'change:value', function () {\n          if (this.model.mappingType !== 'script') { return; }\n\n          this.model.language = comboboxView.value;\n          var info = this.languages.get(this.model.language);\n\n          if (!info) { return; }\n          this.placeholder = info.placeholder || '';\n        });\n\n        this.on('change:visible', function () {\n          if (this.visible) {\n            comboboxView.setVisible();\n          }\n          else {\n            comboboxView.suggestionsEl.style.display = 'none';\n          }\n        });\n\n        return comboboxView;\n      }\n    }\n  },\n\n  collections: {\n    languages: LanguagesCollection,\n    possibleLanguages: LanguagesCollection\n  },\n\n  session: {\n    visible:      'boolean',\n    big:          'boolean',\n    placeholder:  'string',\n    originalBox:  'any',\n    invalid:      'boolean'\n  },\n\n  derived: {\n    contextMenu: {\n      cache: false,\n      fn: function () {\n        var current = this;\n        while ((current = current.parent)) {\n          if (current.contextMenu) {\n            return current.contextMenu;\n          }\n        }\n      }\n    },\n    tableView: {\n      dep: ['parent'],\n      cache: false,\n      fn: function () {\n        var parent = this.parent;\n        while ((parent = parent.parent)) {\n          if (parent.tableEl instanceof Element) {\n            return parent;\n          }\n        }\n      }\n    }\n  },\n\n  bindings: {\n    visible: {\n      type: 'toggle'\n    },\n\n    placeholder: {\n      type: 'attribute',\n      selector: 'textarea',\n      name: 'placeholder'\n    },\n\n    'model.source': {\n      type: 'value',\n      selector: '.script textarea'\n    },\n\n    'model.expression': {\n      type: 'value',\n      selector: '.expression input'\n    }\n  },\n\n  events: {\n    'keyup .expression input':    '_handleExpressionChange',\n    'keyup .script textarea':     '_handleScriptChange',\n    'click .toggle-script':       '_handleScriptToggleClick',\n    'click .icon-clear':          '_handleClearClick'\n  },\n\n  _handleExpressionChange: function () {\n    try {\n      this.model.expression = this.expressionEl.value;\n      if (this.parent.error) {\n        this.parent.error = false;\n      }\n    }\n    catch (err) {\n      this.parent.error = err.message;\n    }\n  },\n\n  _handleScriptChange: function (evt) {\n    this.model.source = evt.target.value;\n  },\n\n  _handleScriptToggleClick: function (evt) {\n    if (evt.target.className.indexOf('use-script') > -1) {\n      this.model.mappingType = 'script';\n      this.big = true;\n    }\n    else {\n      this.model.mappingType = 'expression';\n      this.big = false;\n    }\n  },\n\n  _handleClearClick: function () {\n    this.hide();\n  },\n\n  initialize: function () {\n    this.on('change:big', function () {\n      var style = this.el.style;\n      var box;\n\n      if (this.big) {\n        this.el.classList.add('big');\n\n        box = elBox(this.tableView.el);\n\n        style.width = box.width +'px';\n        style.height = box.height +'px';\n      }\n      else {\n        this.el.classList.remove('big');\n\n        box = this.originalBox;\n\n        style.width = 'auto';\n        style.height = 'auto';\n      }\n\n      if (box) {\n        this._resizeTextarea(box);\n        style.top = box.top +'px';\n        style.left = box.left +'px';\n      }\n    });\n  },\n\n  setPosition: function () {\n    if (!this.parent || !this.parent.el) {\n      this.visible = false;\n      return;\n    }\n\n    this.originalBox = elBox(this.el);\n\n    var box = elBox(this.parent.el);\n\n    box.top -= this.el.clientHeight;\n\n    box.left += Math.min(document.body.clientWidth - (box.left + this.el.clientWidth), 0);\n    box.top += Math.min(document.body.clientHeight - (box.top + this.el.clientHeight), 0);\n\n    this.el.style.top = box.top +'px';\n    this.el.style.left = box.left +'px';\n\n    if (this.languageView) {\n      this.languageView.setPosition();\n    }\n  },\n\n  _resizeTextarea: function (box) {\n    var holder = this.sourceEl.parentNode;\n    var link = this.query('.region.' +  this.model.mappingType + ' .row.link');\n    var availableHeight = holder.clientHeight - (this.languageEl.clientHeight + link.clientHeight);\n\n    this.sourceEl.style.height = (box.height - (this.languageEl.clientHeight + availableHeight)) + 'px';\n  },\n\n  show: function (model, parent) {\n    if (!model) {\n      return;\n    }\n\n    if (parent && this.parent !== parent) {\n      this.parent = parent;\n    }\n\n    if (this.model !== model) {\n      this.model = model;\n    }\n\n    this.languages.reset(defaultLanguage);\n\n    instance.visible = true;\n    if (this.parent) {\n      if (this.parent.contextMenu) {\n        this.parent.contextMenu.close();\n      }\n      if (this.parent.clauseValuesEditor) {\n        this.parent.clauseValuesEditor.hide();\n      }\n    }\n\n    this.setPosition();\n\n    return this;\n  },\n\n  hide: function () {\n    this.big = false;\n    this.visible = false;\n    return this;\n  },\n\n  render: function () {\n    this.renderWithTemplate();\n\n    this.cacheElements({\n      expressionEl: '.expression input',\n      languageEl:   '.language',\n      sourceEl:     '.script textarea'\n    });\n\n    return this;\n  }\n});\n\n\n\nvar instance;\nClauseExpressionView.instance = function (suggestions, parent) {\n  if (!instance) {\n    instance = new ClauseExpressionView({});\n    instance.render();\n  }\n\n  if (!document.body.contains(instance.el)) {\n    document.body.appendChild(instance.el);\n  }\n\n  instance.show(suggestions, parent);\n\n  return instance;\n};\n\n\nif (typeof window !== 'undefined') {\n  window.dmnClauseExpressionEditor = ClauseExpressionView.instance();\n}\n\nClauseExpressionView.Collection = LanguagesCollection;\n\nmodule.exports = ClauseExpressionView;\n",
    "'use strict';\n/* global module: false, deps: false, require: false */\n\nvar View = deps('ampersand-view');\nvar Collection = deps('ampersand-collection');\nvar State = deps('ampersand-state');\nvar ComboBoxView = require('./combobox-view');\n\n\n\nvar ValuesCollection = Collection.extend({\n  last: function () {\n    return this.models[this.models.length - 1];\n  },\n\n  restripe: function () {\n    var models = this.filter(function (model) {\n      return model.value;\n    });\n\n    models.push({\n      value: ''\n    });\n\n    this.reset(models);\n\n    return this;\n  },\n\n  model: State.extend({\n    props: {\n      value: 'string'\n    },\n\n    initialize: function () {\n      this.on('change:value', function () {\n        this.collection.restripe();\n      });\n    }\n  })\n});\n\nvar ValuesItemView = View.extend({\n  template: '<li><input tabindex=\"1\" placeholder=\"An other possible value\" /></li>',\n\n  session: {\n    invalid: 'boolean'\n  },\n\n  bindings: {\n    'model.value': {\n      type: 'value',\n      selector: 'input'\n    },\n    invalid: {\n      type: 'booleanClass',\n      name: 'invalid',\n      selector: 'input'\n    }\n  },\n\n  events: {\n    'change input':   '_handleValueChange',\n    'blur input':     '_handleValueChange',\n    'keydown input':  '_handleValueKeydown',\n    'keyup input':    '_handleValueKeyup'\n  },\n\n  _handleValueChange: function (evt) {\n    if (this.model.value !== evt.target.value) {\n      this.model.value = evt.target.value;\n    }\n\n    this.validate();\n  },\n\n  _handleValueKeydown: function (evt) {\n    var code = evt.which || evt.keyCode;\n\n    var collection = this.model.collection;\n    var last = collection.last();\n\n    if (last === this.model && evt.target.value) {\n      collection.add({value: ''});\n    }\n\n    if (code === 9) {\n      var inputs = this.parent.queryAll('.allowed-values input');\n      var lastInput = inputs[inputs.length - 1];\n\n      if (inputs.indexOf(evt.target) === (inputs.length - 2)) {\n        lastInput.focus();\n      }\n    }\n  },\n\n  _handleValueKeyup: function (evt) {\n    var collection = this.model.collection;\n    var last = collection.last();\n\n    if (last === this.model && evt.target.value) {\n      collection.add({value: ''});\n    }\n  },\n\n  validate: function () {\n    var val = this.model.value;\n    if (!val) {\n      this.invalid = false;\n      return this;\n    }\n\n    var cid = this.model.cid;\n    var same = this.model.collection.filter(function (other) {\n      return other.cid !== cid && other.value === val;\n    });\n\n    this.invalid = same.length > 0;\n\n    return this;\n  }\n});\n\n\n\n\n\n\n\nvar DatatypesCollection = Collection.extend({\n  mainIndex: 'value',\n  model: State.extend({\n    props: {\n      value: 'string',\n      offer: 'string'\n    }\n  })\n});\n\n\n\n\nvar primitiveTypes = [\n  {\n    value: 'string',\n    offer: 'choices'\n  },\n  {\n    value: 'date',\n    offer: 'range'\n  },\n\n  // https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\n  {\n    value: 'short',\n    offer: 'range'\n  },\n  {\n    value: 'int',\n    offer: 'range'\n  },\n  {\n    value: 'long',\n    offer: 'range'\n  },\n  {\n    value: 'float',\n    offer: 'range'\n  },\n  {\n    value: 'double',\n    offer: 'range'\n  },\n\n  {\n    value: 'boolean'\n  }\n];\n\n\nvar ClauseValuesView = View.extend({\n  template: '<div class=\"dmn-clausevalues-setter choices\">' +\n              '<div class=\"datatype\">' +\n              '</div>' +\n\n              '<div class=\"allowed-values\">' +\n                '<label>Allowed values:</label>' +\n                '<ul></ul>' +\n              '</div>' +\n\n              '<ul class=\"ranged-values\">' +\n                '<li class=\"min\">' +\n                  '<label>Min:</label>' +\n                  '<input tabindex=\"1\" />' +\n                '</li>' +\n                '<li class=\"max\">' +\n                  '<label>Max:</label>' +\n                  '<input tabindex=\"2\" />' +\n                '</li>' +\n              '</ul>' +\n            '</div>',\n\n  subviews: {\n    datatypeView: {\n      container: '.datatype',\n      prepareView: function (el) {\n        var comboboxView = new ComboBoxView({\n          parent:     this,\n          collection: this.datatypes,\n          // value:      this.datatype,\n          label:      'Type:',\n          className:  el.className\n        });\n\n        var cbEl = comboboxView.render().el;\n        el.parentNode.replaceChild(cbEl, el);\n\n        this.listenTo(comboboxView, 'change:value', function () {\n          this.datatype = comboboxView.value;\n        });\n\n        this.on('change:visible', function () {\n          if (this.visible) {\n            comboboxView.setVisible();\n          }\n          else {\n            comboboxView.suggestionsEl.style.display = 'none';\n          }\n        });\n\n        return comboboxView;\n      }\n    }\n  },\n\n  collections: {\n    datatypes: DatatypesCollection,\n    possibleValues: ValuesCollection\n  },\n\n  session: {\n    visible: 'boolean',\n    datatype: {type: 'string', default: 'string'}\n  },\n\n  derived: {\n    contextMenu: {\n      cache: false,\n      fn: function () {\n        var current = this;\n        while ((current = current.parent)) {\n          if (current.contextMenu) {\n            return current.contextMenu;\n          }\n        }\n      }\n    }\n  },\n\n  bindings: {\n    visible: {\n      type: 'toggle'\n    },\n    datatype: [\n      {\n        type: function(el, val, prev) {\n          if (!this.datatypes.length) { return; }\n          var type;\n\n          if (prev) {\n            type = this.datatypes.get(prev);\n            if (type) {\n              el.classList.remove(type.offer);\n            }\n          }\n\n          if (val) {\n            type = this.datatypes.get(val);\n            if (type) {\n              el.classList.add(type.offer);\n            }\n          }\n        }\n      },\n      {\n        selector: '.min input',\n        type: function (el, val) {\n          var before = new Date();\n          before.setFullYear(before.getFullYear() - 1);\n          el.setAttribute('placeholder', val === 'date' ? before.toISOString().split('.').shift() : '');\n        }\n      },\n      {\n        selector: '.max input',\n        type: function (el, val) {\n          var after = new Date();\n          after.setFullYear(after.getFullYear() + 1);\n          el.setAttribute('placeholder', val === 'date' ? after.toISOString().split('.').shift() : '');\n        }\n      }\n    ]\n  },\n\n  events: {\n    'change select': '_handleDatatypeChange'\n  },\n\n  _handleDatatypeChange: function () {\n    this.datatype = this.datatypeEl.value;\n  },\n\n  initialize: function () {\n    var self = this;\n\n    function hasModel() {\n      return self.parent && self.parent.model && self.parent.model.datatype;\n    }\n\n    this.on('change:datatype', function () {\n      if (!hasModel()) { return; }\n\n      this.parent.model.datatype = this.datatype;\n    });\n\n    this.listenTo(this.possibleValues, 'all', function () {\n      if (!hasModel()) { return; }\n\n      this.parent.model.choices = this.possibleValues\n                                    .filter(function (item) {\n                                      return item.value;\n                                    })\n                                    .map(function (item) {\n                                      return item.value;\n                                    });\n    });\n  },\n\n  setPosition: function () {\n    if (!this.parent || !this.parent.el) {\n      this.visible = false;\n      return;\n    }\n\n    var node = this.parent.el;\n    var top = node.offsetTop;\n    var left = node.offsetLeft;\n    var helper = this.el;\n\n    while ((node = node.offsetParent)) {\n      if (node.offsetTop) {\n        top += parseInt(node.offsetTop, 10);\n      }\n      if (node.offsetLeft) {\n        left += parseInt(node.offsetLeft, 10);\n      }\n    }\n\n    left += this.parent.el.clientWidth;\n    top -= 20;\n\n    left += Math.min(document.body.clientWidth - (left + this.el.clientWidth), 0);\n    top += Math.min(document.body.clientHeight - (top + this.el.clientHeight), 0);\n\n    helper.style.position = 'absolute';\n    helper.style.top = top +'px';\n    helper.style.left = left +'px';\n\n\n    if (this.datatypeView) {\n      this.datatypeView.setPosition();\n    }\n  },\n\n  show: function (datatype, values, parent) {\n    if (parent && this.parent !== parent) {\n      this.parent = parent;\n    }\n\n    this.datatypes.reset(primitiveTypes);\n\n    if (this.datatype && !this.datatypeView.inputEl.value) {\n      this.datatypeView.inputEl.value = this.datatype;\n    }\n\n    values = values || [];\n    var vals = (Array.isArray(values) ? values.map(function (val) {\n      return { value: val };\n    }) : values.toJSON())\n        .filter(function (item) {\n          return item.value;\n        });\n    vals.push({ value: '' });\n\n    this.possibleValues.reset(vals);\n\n    instance.visible = true;\n    if (this.parent) {\n      if (this.parent.contextMenu) {\n        this.parent.contextMenu.close();\n      }\n      if (this.parent.clauseExpressionEditor) {\n        this.parent.clauseExpressionEditor.hide();\n      }\n    }\n\n    if (instance.visible) {\n      this.setPosition();\n    }\n\n    return this;\n  },\n\n  hide: function () {\n    this.visible = false;\n    return this;\n  },\n\n  render: function () {\n    this.renderWithTemplate();\n\n    this.cacheElements({\n      valuesEl:   'ul',\n\n      minLabelEl: '.min label',\n      minInputEl: '.min input',\n\n      maxLabelEl: '.max label',\n      maxInputEl: '.max input'\n    });\n\n    this.renderCollection(this.possibleValues, ValuesItemView, this.valuesEl);\n\n    this.listenTo(this.possibleValues, 'change', function () {\n      this.trigger('change');\n    });\n\n    return this;\n  }\n});\n\n\n\nvar instance;\nClauseValuesView.instance = function (suggestions, parent) {\n  if (!instance) {\n    instance = new ClauseValuesView({});\n    instance.render();\n  }\n\n  if (!document.body.contains(instance.el)) {\n    document.body.appendChild(instance.el);\n  }\n\n  instance.show(suggestions, parent);\n\n  return instance;\n};\n\n\nif (typeof window !== 'undefined') {\n  window.dmnClauseValuesEditor = ClauseValuesView.instance();\n}\n\nClauseValuesView.Collection = ValuesCollection;\n\nmodule.exports = ClauseValuesView;\n",
    "'use strict';\n/* global module: false, deps: false */\n\nvar View = deps('ampersand-view');\nvar Collection = deps('ampersand-collection');\nvar State = deps('ampersand-state');\n\n// function toArray(thing) {\n//   return Array.prototype.slice.apply(thing);\n// }\n\nvar SuggestionsCollection = Collection.extend({\n  model: State.extend({\n    props: {\n      value: 'string',\n      html: 'string'\n    }\n  })\n});\n\nvar SuggestionView = View.extend({\n  template: '<li tabindex=\"1\"></li>',\n\n  bindings: {\n    'model.value': {\n      type: 'text'\n    }\n  },\n\n  events: {\n    click:    '_handleClick',\n    focus:    '_handleFocus',\n    keydown:  '_handleKeydown'\n  },\n\n  _handleClick: function () {\n    this.parent.inputEl.value = this.parent.value = this.model.value;\n    this.parent.collapse();\n  },\n\n  _handleFocus: function () {\n    this.parent.inputEl.value = this.parent.value = this.model.value;\n  },\n\n  _handleKeydown: function (evt) {\n    var code = evt.which || evt.keyCode;\n    // enter\n    if (code === 13) {\n      this._handleClick();\n      evt.preventDefault();\n    }\n\n    // tab\n    else if (code === 9) {\n      var next = this.el[evt.shiftKey ? 'previousSibling' : 'nextSibling'];\n      if (!next) {\n        next = this.parent.inputEl;\n      }\n      evt.preventDefault();\n      next.focus();\n    }\n\n    // down\n    else if (code === 40) {\n      var next = this.el.nextSibling;\n      if (!next) {\n        next = this.parent.inputEl;\n      }\n      evt.preventDefault();\n      next.focus();\n    }\n\n    // up\n    else if (code === 38) {\n      var next = this.el.previousSibling;\n      if (!next) {\n        next = this.parent.inputEl;\n      }\n      evt.preventDefault();\n      next.focus();\n    }\n\n    // esc\n    else if (code === 27) {\n      this.el.parentNode.style.display = 'none';\n    }\n  }\n});\n\n\n\nvar ComboBoxView = View.extend({\n  template: '<div class=\"dmn-combobox\">' +\n              '<label></label>' +\n              '<input tabindex=\"0\" />' +\n              '<span class=\"caret\"></span>' +\n            '</div>',\n\n  collections: {\n    suggestions: SuggestionsCollection\n  },\n\n  session: {\n    value:      'string',\n    label:      'string',\n    className:  'string'\n  },\n\n  bindings: {\n    className: {\n      type: 'class'\n    },\n\n    label: {\n      type: 'text',\n      selector: 'label'\n    },\n\n    placeholder: {\n      type: 'attribute',\n      name: 'placeholder',\n      selector: 'input'\n    }\n  },\n\n  events: {\n    'input input':    '_handleInput',\n    'focus input':    '_handleFocus',\n    'blur input':     '_handleBlur',\n    'keydown input':  '_handleKeydown',\n    'click .caret':   '_handleCaretClick'\n  },\n\n  derived: {\n    expanded: {\n      deps: [],\n      cache: false,\n      fn: function () {\n        return this.suggestionsEl.style.display !== 'none';\n      }\n    }\n  },\n\n  _handleFocus: function () {\n    this.setPosition();\n\n    if (!this.suggestions.length) {\n      this.suggestions.reset(this.collection.toJSON());\n    }\n  },\n\n  _handleBlur: function () {},\n\n  _handleInput: function () {\n    this.setPosition();\n    this.value = this.inputEl.value.trim();\n    this.suggestions.reset(this.filter());\n  },\n\n  _handleKeydown: function (evt) {\n    var code = evt.which || evt.keyCode;\n    if (code === 9 || code === 40 || code === 38) {\n      var views = this.suggestionsView.views;\n      var view = views[evt.shiftKey || code === 38 ? views.length - 1 : 0];\n      if (view) {\n        if (!this.expanded) {\n          this.expand();\n        }\n        view.el.focus();\n        evt.preventDefault();\n      }\n    }\n\n    // enter\n    else if (code === 13) {\n      this.toggle();\n    }\n\n    // esc\n    else if (code === 27) {\n      this.collapse();\n    }\n  },\n\n  _handleCaretClick: function () {\n    this.toggle();\n  },\n\n  expand: function () {\n    if (!this.expanded) {\n      this.suggestions.reset(this.collection.toJSON());\n      this.el.classList.add('expanded');\n    }\n    return this;\n  },\n\n  collapse: function () {\n    if (this.expanded) {\n      this.suggestionsEl.style.display = 'none';\n      this.el.classList.remove('expanded');\n    }\n    return this;\n  },\n\n  toggle: function () {\n    this[this.expanded ? 'collapse' : 'expand']();\n    return this;\n  },\n\n  filter: function () {\n    var filtered = this.collection.filter(function (model) {\n      return model.value.indexOf(this.value) > -1;\n    }, this).map(function (model) {\n      return model.toJSON();\n    });\n    return filtered;\n  },\n\n  initialize: function () {\n    if (!this.collection) {\n      throw new Error('ComboBoxView requires a collection option');\n    }\n\n    this.on('change:value', function () {\n      if (!this.model || this.model.value === this.value) { return; }\n      this.model.value = this.value;\n    });\n  },\n\n  setPosition: function () {\n    if (!this.parent || !this.parent.el) {\n      this.visible = false;\n      return;\n    }\n\n    var node = this.inputEl;\n    var top = node.offsetTop + this.inputEl.clientHeight;\n    var left = node.offsetLeft;\n    var helper = this.suggestionsEl;\n\n    while ((node = node.offsetParent)) {\n      if (node.offsetTop) {\n        top += parseInt(node.offsetTop, 10);\n      }\n      if (node.offsetLeft) {\n        left += parseInt(node.offsetLeft, 10);\n      }\n    }\n\n    helper.style.position = 'absolute';\n    helper.style.top = top + 'px';\n    helper.style.left = left + 'px';\n    helper.style.width = this.inputEl.clientWidth + 'px';\n  },\n\n  setVisible: function () {\n    var display = 'block';\n\n    if (this.suggestions.length < 1) {\n      display = 'none';\n    }\n\n    this.suggestionsEl.style.display = display;\n    if (display === 'none') {\n      this.el.classList.remove('expanded');\n      return;\n    }\n\n    this.el.classList.add('expanded');\n\n    this.setPosition();\n\n    if (document.activeElement === this.inputEl) {\n      return;\n    }\n\n    this.suggestionsView.views.forEach(function (view, v) {\n      if (v === 0) {\n        view.el.focus();\n      }\n    });\n  },\n\n  render: function () {\n    if (this.rendered) {\n      return this;\n    }\n    this.renderWithTemplate();\n\n    this.cacheElements({\n      labelEl: 'label',\n      inputEl: 'input'\n    });\n\n    this.labelEl.setAttribute('for', this.cid);\n    this.inputEl.setAttribute('id', this.cid);\n\n    if (this.value && !this.inputEl.value) {\n      this.inputEl.value = this.value;\n    }\n\n    this.suggestionsEl = document.createElement('ul');\n    this.suggestionsEl.className = 'dmn-combobox-suggestions';\n    document.body.appendChild(this.suggestionsEl);\n\n    this.suggestionsView = this.renderCollection(this.suggestions, SuggestionView, this.suggestionsEl);\n\n    this.listenToAndRun(this.suggestions, 'all', this.setVisible);\n\n    return this;\n  },\n\n  remove: function () {\n    document.body.removeChild(this.suggestionsEl);\n    View.prototype.remove.apply(this);\n  }\n});\n\nmodule.exports = ComboBoxView;\n",
    "'use strict';\n/*global module: false*/\n\nvar mixins = module.exports = {};\n\n[\n  'clauseValuesEditor',\n  'clauseExpressionEditor',\n  'contextMenu'\n].forEach(function (name) {\n  mixins[name] = {\n    cache: false,\n    fn: function () {\n      var current = this;\n      while ((current = current.parent)) {\n        if (current[name]) {\n          return current[name];\n        }\n      }\n    }\n  };\n});\n",
    "'use strict';\n/* global module: false, deps: false */\n\nvar View = deps('ampersand-view');\nvar Collection = deps('ampersand-collection');\nvar State = deps('ampersand-state');\n\n\nvar defaultCommands = [\n  {\n    label: 'Cell',\n    subcommands: [\n      {\n        label: 'clear',\n        icon: 'clear',\n        hint: 'Clear the content of the focused cell',\n        possible: function () {\n          // console.info('clear possible?', arguments, this);\n        },\n        fn: function () {}\n      }\n    ]\n  },\n  {\n    label: 'Rule',\n    icon: '',\n    subcommands: [\n      {\n        label: 'add',\n        icon: 'plus',\n        fn: function () {\n          this.parent.model.addRule(this.scope);\n        }\n      },\n      {\n        label: 'copy',\n        icon: 'copy',\n        fn: function () {\n          this.parent.model.copyRule(this.scope);\n        },\n        subcommands: [\n          {\n            label: 'above',\n            icon: 'above',\n            hint: 'Copy the rule above the focused one',\n            fn: function () {\n              this.parent.model.copyRule(this.scope, -1);\n            }\n          },\n          {\n            label: 'below',\n            icon: 'below',\n            hint: 'Copy the rule below the focused one',\n            fn: function () {\n              this.parent.model.copyRule(this.scope, 1);\n            }\n          }\n        ]\n      },\n      {\n        label: 'remove',\n        icon: 'minus',\n        hint: 'Remove the focused rule',\n        fn: function () {\n          this.parent.model.removeRule(this.scope);\n        }\n      },\n      {\n        label: 'clear',\n        icon: 'clear',\n        hint: 'Clear the focused rule',\n        fn: function () {\n          this.parent.model.clearRule(this.scope);\n        }\n      }\n    ]\n  },\n  {\n    label: 'Input',\n    icon: 'input',\n    subcommands: [\n      {\n        label: 'add',\n        icon: 'plus',\n        subcommands: [\n          {\n            label: 'before',\n            icon: 'left',\n            hint: 'Add an input clause before the focused one',\n            fn: function () {\n              this.parent.model.addInput();\n            }\n          },\n          {\n            label: 'after',\n            icon: 'right',\n            hint: 'Add an input clause after the focused one',\n            fn: function () {\n              this.parent.model.addInput();\n            }\n          }\n        ]\n      },\n      {\n        label: 'remove',\n        icon: 'minus',\n        fn: function () {\n          this.parent.model.removeInput();\n        }\n      }\n    ]\n  },\n  {\n    label: 'Output',\n    icon: 'output',\n    subcommands: [\n      {\n        label: 'add',\n        icon: 'plus',\n        subcommands: [\n          {\n            label: 'before',\n            icon: 'left',\n            hint: 'Add an output clause before the focused one',\n            fn: function () {\n              this.parent.model.addOutput();\n            }\n          },\n          {\n            label: 'after',\n            icon: 'right',\n            hint: 'Add an output clause after the focused one',\n            fn: function () {\n              this.parent.model.addOutput();\n            }\n          }\n        ]\n      },\n      {\n        label: 'remove',\n        icon: 'minus',\n        fn: function () {\n          this.parent.model.removeOutput();\n        }\n      }\n    ]\n  }\n];\n\n\n\n\n\n\n\n\n\nvar CommandModel = State.extend({\n  props: {\n    label:      'string',\n    hint:       'string',\n    icon:       'string',\n    href:       'string',\n    className:  'string',\n\n    possible: {\n      type: 'any',\n      default: function () { return function () {}; },\n      test: function (newValue) {\n        if (typeof newValue !== 'function' && newValue !== false) {\n          return 'must be either a function or false';\n        }\n      }\n    },\n\n    fn: {\n      type: 'any',\n      default: false,\n      test: function (newValue) {\n        if (typeof newValue !== 'function' && newValue !== false) {\n          return 'must be either a function or false';\n        }\n      }\n    }\n  },\n\n  derived: {\n    disabled: {\n      deps: ['possible'],\n      cache: false,\n      fn: function () {\n        return typeof this.possible === 'function' ? !this.possible() : false;\n      }\n    }\n  },\n\n  subcommands: null,\n\n  initialize: function (attributes) {\n    this.subcommands = new CommandsCollection(attributes.subcommands || [], {\n      parent: this\n    });\n  }\n});\n\n\n\n\n\n\n\n\n\n\nvar CommandsCollection = Collection.extend({\n  model: CommandModel\n});\n\n\n\n\n\n\n\n\n\n\nvar ContextMenuItem = View.extend({\n  autoRender: true,\n\n  template: '<li>' +\n              '<a>' +\n                '<span class=\"icon\"></span>' +\n                '<span class=\"label\"></span>' +\n              '</a>' +\n              '<ul class=\"dropdown-menu\"></ul>' +\n            '</li>',\n\n  bindings: {\n    'model.label': {\n      type: 'text',\n      selector: '.label'\n    },\n\n    'model.hint': {\n      type: 'attribute',\n      name: 'title'\n    },\n\n    'model.fn': {\n      type: 'booleanClass',\n      selector: 'a',\n      no: 'disabled'\n    },\n\n    'model.disabled': {\n      type: 'booleanClass',\n      name: 'disabled'\n    },\n\n    'model.subcommands.length': {\n      type: 'booleanClass',\n      name: 'dropdown'\n    },\n\n    'model.href': {\n      selector: 'a',\n      name: 'href',\n      type: function (el, value) {\n        if (!value) {\n          el.removeAttribute('href');\n        }\n        else {\n          el.setAttribute('href', value);\n        }\n      }\n    },\n\n    'model.icon': {\n      type: function (el, value) {\n        el.className = 'icon ' + value;\n      },\n      selector: '.icon'\n    },\n\n    'model.className': {\n      type: 'class'\n    }\n  },\n\n  events: {\n    click:      '_handleClick',\n    mouseover:  '_handleMouseover',\n    mouseout:   '_handleMouseout'\n  },\n\n  render: function () {\n    this.renderWithTemplate();\n    this.listenToAndRun(this.model, 'change:subcommands', function () {\n      this.renderCollection(this.model.subcommands, ContextMenuItem, this.query('ul'));\n    });\n    return this;\n  },\n\n  _handleClick: function (evt) {\n    if (this.model.fn) {\n      this.parent.triggerCommand(this.model, evt);\n    }\n    else if (!this.model.href) {\n      evt.preventDefault();\n    }\n  },\n\n  _handleMouseover: function () {\n\n  },\n\n\n\n  _handleMouseout: function () {\n\n  },\n\n\n\n  triggerCommand: function (command, evt) {\n    this.parent.triggerCommand(command, evt);\n  }\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar ContextMenuView = View.extend({\n  autoRender: true,\n\n  template: '<nav class=\"dmn-context-menu\">' +\n              '<div class=\"coordinates\">' +\n                '<label>Coords:</label>' +\n                '<span class=\"x\"></span>' +\n                '<span class=\"y\"></span>' +\n              '</div>' +\n              '<ul></ul>' +\n            '</nav>',\n\n  collections: {\n    commands: CommandsCollection\n  },\n\n  session: {\n    isOpen: 'boolean',\n    scope:  'state'\n  },\n\n  bindings: {\n    isOpen: {\n      type: 'toggle'\n    },\n    'parent.model.x': {\n      type: 'text',\n      selector: 'div span.x'\n    },\n    'parent.model.y': {\n      type: 'text',\n      selector: 'div span.y'\n    }\n  },\n\n  open: function (options) {\n    var style = this.el.style;\n\n    style.left = options.left + 'px';\n    style.top = options.top + 'px';\n\n    this.isOpen = true;\n    if (options.parent) {\n      if (options.parent.clauseValuesEditor) {\n        options.parent.clauseValuesEditor.hide();\n      }\n      if (options.parent.clauseExpressionEditor) {\n        options.parent.clauseExpressionEditor.hide();\n      }\n    }\n\n    this.scope = options.scope;\n    var commands = options.commands || defaultCommands;\n\n    this.commands.reset(commands);\n    return this;\n  },\n\n  triggerCommand: function (command, evt) {\n    command.fn.call(this, evt);\n    if (!command.keepOpen) {\n      this.close();\n    }\n    return this;\n  },\n\n  close: function () {\n    this.isOpen = false;\n    return this;\n  },\n\n  render: function () {\n    this.renderWithTemplate();\n    this.cacheElements({\n      commandsEl: 'ul'\n    });\n\n\n\n    this.commandsView = this.renderCollection(this.commands, ContextMenuItem, this.commandsEl);\n    return this;\n  }\n});\n\n\n\n\n\n\n\n\n\n\n\nvar instance;\nContextMenuView.instance = function () {\n  if (!instance) {\n    instance = new ContextMenuView();\n  }\n\n  if (!document.body.contains(instance.el)) {\n    document.body.appendChild(instance.el);\n  }\n\n  return instance;\n};\n\nif (typeof window !== 'undefined') {\n  window.dmnContextMenu = ContextMenuView.instance();\n}\n\nContextMenuView.Collection = CommandsCollection;\n\nmodule.exports = ContextMenuView;\n",
    "'use strict';\n/* global require: false, module: false, deps: false, console: false */\n\nvar View = deps('ampersand-view');\nvar DecisionTable = require('./table-data');\nvar RuleView = require('./rule-view');\n\n\n\n\nvar ClauseHeaderView = require('./clause-view');\n\nfunction toArray(els) {\n  return Array.prototype.slice.apply(els);\n}\n\n\nfunction makeTd(type) {\n  var el = document.createElement('td');\n  el.className = type;\n  return el;\n}\n\n\nfunction makeAddButton(clauseType, table) {\n  var el = document.createElement('span');\n  el.className = 'icon-dmn icon-plus';\n  el.addEventListener('click', function () {\n    table[clauseType === 'input' ? 'addInput' : 'addOutput']();\n  });\n  return el;\n}\n\nvar ControlsView = View.extend({\n  autoRender: true,\n\n  template: '<div class=\"controls\">' +\n              '<a class=\"toggle-mappings\">Hide mappings</a>' +\n            '</div>',\n\n  events: {\n    'click .toggle-mappings': '_handleMappingsClick'\n  },\n\n  _handleMappingsClick: function (evt) {\n    this.parent.hideMappings = !this.parent.hideMappings;\n    evt.target.textContent = this.parent.hideMappings ? 'Show mappings' : 'Hide mappings';\n  }\n});\n\n\nvar FootView = View.extend({\n  template: '<tfoot><tr></tr></tfoot>',\n\n  events: {\n    'click .add-rule': '_handleAddRuleClick'\n  },\n\n  _handleAddRuleClick: function () {\n    this.model.addRule();\n  },\n\n  makeLinkEl: function () {\n    var td = document.createElement('td');\n    td.className = 'add-rule';\n    var a = document.createElement('a');\n    a.setAttribute('title', 'Add a rule');\n    a.className = 'icon-dmn icon-plus';\n    td.appendChild(a);\n    return td;\n  },\n\n  initialize: function () {\n    var table = this.model;\n    this.listenTo(table.inputs, 'all', this.render);\n    this.listenToAndRun(table.outputs, 'all', this.render);\n  },\n\n  render: function () {\n    var table = this.model;\n    if (this.rowEl) {\n      var children = [].slice.apply(this.rowEl.childNodes);\n      children.forEach(function (el) {\n        this.rowEl.removeChild(el);\n      }, this);\n    }\n    else {\n      this.renderWithTemplate();\n      this.cacheElements({\n        rowEl: 'tr'\n      });\n    }\n\n    this.rowEl.appendChild(this.makeLinkEl());\n    var count = 1 + Math.max(1, table.inputs.length) + Math.max(1, table.outputs.length);\n    for (var c = 0; c < count; c++) {\n      this.rowEl.appendChild(document.createElement('td'));\n    }\n    return this;\n  }\n});\n\n\nvar DecisionTableView = View.extend({\n  autoRender: true,\n\n  template: '<div class=\"dmn-table\">' +\n              '<div data-hook=\"controls\"></div>' +\n\n              '<header>' +\n                '<h3 data-hook=\"table-name\" contenteditable></h3>' +\n              '</header>' +\n\n              '<table>' +\n                '<thead>' +\n                  '<tr>' +\n                    '<th class=\"hit\" rowspan=\"4\"></th>' +\n                    '<th class=\"input\" colspan=\"2\">Input</th>' +\n                    '<th class=\"output\" colspan=\"2\">Output</th>' +\n                    '<th class=\"annotation\" rowspan=\"4\">Annotation</th>' +\n                  '</tr>' +\n\n                  '<tr class=\"labels\"></tr>' +\n                  '<tr class=\"mappings\"></tr>' +\n                  '<tr class=\"values\"></tr>' +\n                '</thead>' +\n\n                '<tbody></tbody>' +\n\n              '</table>' +\n            '</div>',\n\n  session: {\n    contextMenu:            'state',\n    clauseValuesEditor:     'state',\n    clauseExpressionEditor: 'state',\n    scrollable:             'boolean',\n    hideMappings:           'boolean'\n  },\n\n  bindings: {\n    'model.name': {\n      hook: 'table-name',\n      type: 'text'\n    },\n    hint: {\n      type: 'innerHTML',\n      hook: 'hints'\n    },\n    scrollable: {\n      type: 'booleanClass'\n    },\n    hideMappings: {\n      type: 'booleanClass',\n      name: 'hide-mappings'\n    }\n  },\n\n  events: {\n    'input header h3': '_handleNameInput'\n  },\n\n  _handleNameInput: function (evt) {\n    var val = evt.target.textContent.trim();\n    if (val === this.model.name) { return; }\n    this.model.name = val;\n  },\n\n  initialize: function (options) {\n    options = options || {};\n\n    this.model = this.model || new DecisionTable.Model();\n  },\n\n  hideContextMenu: function () {\n    if (!this.contextMenu) { return; }\n    this.contextMenu.close();\n  },\n\n  showContextMenu: function (cellModel, evt) {\n    if (!this.contextMenu) { return; }\n    if (evt) {\n      evt.preventDefault();\n    }\n\n    var table = this.model;\n\n    var options = {\n      scope:  cellModel,\n      parent: this,\n      left:   evt.pageX,\n      top:    evt.pageY\n    };\n\n    options.commands = [\n      {\n        label: 'Rule',\n        icon: '',\n        subcommands: [\n          {\n            label: 'add',\n            icon: 'plus',\n            fn: function () {\n              table.addRule(this.scope);\n            },\n            subcommands: [\n              {\n                label: 'above',\n                icon: 'above',\n                hint: 'Add a rule above the focused one',\n                fn: function () {\n                  table.addRule(this.scope, -1);\n                }\n              },\n              {\n                label: 'below',\n                icon: 'below',\n                hint: 'Add a rule below the focused one',\n                fn: function () {\n                  table.addRule(this.scope, 1);\n                }\n              }\n            ]\n          },\n          // {\n          //   label: 'copy',\n          //   icon: 'copy',\n          //   fn: function () {\n          //     table.copyRule(this.scope);\n          //   },\n          //   subcommands: [\n          //     {\n          //       label: 'above',\n          //       icon: 'above',\n          //       hint: 'Copy the rule above the focused one',\n          //       fn: function () {\n          //         table.copyRule(this.scope, -1);\n          //       }\n          //     },\n          //     {\n          //       label: 'below',\n          //       icon: 'below',\n          //       hint: 'Copy the rule below the focused one',\n          //       fn: function () {\n          //         table.copyRule(this.scope, 1);\n          //       }\n          //     }\n          //   ]\n          // },\n          {\n            label: 'remove',\n            icon: 'minus',\n            hint: 'Remove the focused rule',\n            fn: function () {\n              table.removeRule(this.scope);\n            }\n          },\n          {\n            label: 'clear',\n            icon: 'clear',\n            hint: 'Clear the focused rule',\n            fn: function () {\n              table.clearRule(this.scope.rule);\n            }\n          }\n        ]\n      }\n    ];\n\n    var type = cellModel.type;\n    var addMethod = type === 'input' ? 'addInput' : 'addOutput';\n    if (type !== 'input' && type !== 'output') {\n      this.contextMenu.open(options);\n      return;\n    }\n\n    options.commands.unshift({\n      label: type === 'input' ? 'Input' : 'Output',\n      icon: type,\n      className: type,\n      subcommands: [\n        {\n          label: 'add',\n          icon: 'plus',\n          fn: function () {\n            table[addMethod]();\n          },\n          subcommands: [\n            {\n              label: 'before',\n              icon: 'left',\n              hint: 'Add an ' + type + ' clause before the focused one',\n              fn: function () {\n                table[addMethod]();\n              }\n            },\n            {\n              label: 'after',\n              icon: 'right',\n              hint: 'Add an ' + type + ' clause after the focused one',\n              fn: function () {\n                table[addMethod]();\n              }\n            }\n          ]\n        },\n        {\n          label: 'remove',\n          icon: 'minus',\n          hint: 'Remove the ' + type + ' clause',\n          fn: function () {\n            var clause = cellModel.clause;\n            var delta = clause.collection.indexOf(clause);\n            clause.collection.remove(clause);\n\n            if (clause.clauseType === 'output') {\n              delta += table.inputs.length;\n            }\n\n            table.rules.forEach(function (rule) {\n              var cell = rule.cells.at(delta);\n              rule.cells.remove(cell);\n            });\n            table.rules.trigger('reset');\n          }\n        }\n      ]\n    });\n\n    this.contextMenu.open(options);\n  },\n\n\n  parseChoices: function (el) {\n    if (!el) {\n      return 'MISSING';\n    }\n    var content = el.textContent.trim();\n\n    if (content[0] === '(' && content.slice(-1) === ')') {\n      return content\n        .slice(1, -1)\n        .split(',')\n        .map(function (str) {\n          return str.trim();\n        })\n        .filter(function (str) {\n          return !!str;\n        })\n        ;\n    }\n\n    return [];\n  },\n\n  parseRules: function (ruleEls) {\n    return ruleEls.map(function (el) {\n      return el.textContent.trim();\n    });\n  },\n\n  parseTable: function () {\n    var inputs = [];\n    var outputs = [];\n    var rules = [];\n\n    this.queryAll('thead .labels .input').forEach(function (el, num) {\n      var choiceEls = this.query('thead .values .input:nth-child(' + (num + 1) + ')');\n\n      inputs.push({\n        label:    el.textContent.trim(),\n        choices:  this.parseChoices(choiceEls)\n      });\n    }, this);\n\n    this.queryAll('thead .labels .output').forEach(function (el, num) {\n      var choiceEls = this.query('thead .values .output:nth-child(' + (num + inputs.length + 1) + ')');\n\n      outputs.push({\n        label:    el.textContent.trim(),\n        choices:  this.parseChoices(choiceEls)\n      });\n    }, this);\n\n    this.queryAll('tbody tr').forEach(function (row) {\n      var cells = [];\n      var cellEls = row.querySelectorAll('td');\n\n      for (var c = 1; c < cellEls.length; c++) {\n        var choices = null;\n        var value = cellEls[c].textContent.trim();\n        var type = c <= inputs.length ? 'input' : (c < (cellEls.length - 1) ? 'output' : 'annotation');\n        var oc = c - (inputs.length + 1);\n\n        if (type === 'input' && inputs[c - 1]) {\n          choices = inputs[c - 1].choices;\n        }\n        else if (type === 'output' && outputs[oc]) {\n          choices = outputs[oc].choices;\n        }\n\n        cells.push({\n          value:    value,\n          choices:  choices\n        });\n      }\n\n      rules.push({\n        cells: cells\n      });\n    });\n\n    this.model.name = this.query('h3').textContent.trim();\n    this.model.inputs.reset(inputs);\n    this.model.outputs.reset(outputs);\n    this.model.rules.reset(rules);\n\n    return this.toJSON();\n  },\n\n  toJSON: function () {\n    return this.model.toJSON();\n  },\n\n  inputClauseViews: [],\n  outputClauseViews: [],\n\n  _headerClear: function (type) {\n    toArray(this.labelsRowEl.querySelectorAll('.'+ type)).forEach(function (el) {\n      this.labelsRowEl.removeChild(el);\n    }, this);\n\n    toArray(this.valuesRowEl.querySelectorAll('.'+ type)).forEach(function (el) {\n      this.valuesRowEl.removeChild(el);\n    }, this);\n\n    toArray(this.mappingsRowEl.querySelectorAll('.'+ type)).forEach(function (el) {\n      this.mappingsRowEl.removeChild(el);\n    }, this);\n\n    return this;\n  },\n\n  _resizeBody: function () {\n    if (!this.el.parentNode) {\n      return;\n    }\n\n    var parentHeight = this.el.parentNode.clientHeight;\n    var nameHeight = this.tableNameEl.clientHeight;\n    var headHeight = this.headerEl.clientHeight;\n    var footHeight = this.footView.el.clientHeight;\n    var tableTop = this.tableEl.offsetTop + this.el.offsetTop;//this.tableEl.offsetTop + this.tableNameEl.offsetTop;\n\n\n    var availableHeight = parentHeight - (tableTop + nameHeight + headHeight + footHeight + 40);\n    var bodyHeight = this.bodyEl.clientHeight;\n\n    this.bodyEl.style.visibility = 'hidden';\n    this.bodyEl.style.height = 'auto';\n\n    var firstRow = this.queryAll('tbody tr:first-child td');\n    var footRow = this.footView.queryAll('td');\n    if (bodyHeight > availableHeight) {\n      this.bodyEl.style.height = availableHeight +'px';\n\n      this.scrollable = true;\n      firstRow[0].style.width = this.hitEl.clientWidth + 'px';\n      footRow[0].style.width = this.hitEl.clientWidth + 'px';\n      this.queryAll('thead tr:nth-child(2) td').forEach(function (th, i) {\n        // don't set the width of the last column\n        if (i === firstRow.length - 2) { return; }\n\n        var styles = getComputedStyle(firstRow[i + 1]);\n        var border = styles.getPropertyValue('border-left-width');\n        border = parseInt(border, 10);\n        // border = border === 1 ? border : border + 1;\n\n        firstRow[i + 1].style.width = th.clientWidth + border + 'px';\n        footRow[i + 1].style.width = th.clientWidth + border + 'px';\n      }, this);\n    }\n    else if (this.scrollable) {\n      this.scrollable = false;\n      firstRow.forEach(function (td, i) {\n        td.style.width = null;\n        footRow[i].style.width = null;\n      }, this);\n    }\n    this.bodyEl.style.visibility = 'visible';\n  },\n\n  render: function () {\n    if (!this.el) {\n      this.renderWithTemplate();\n    }\n    else {\n      this.parseTable();\n      this.trigger('change:el');\n    }\n\n    var table = this.model;\n\n    if (!this.headerEl) {\n      this.cacheElements({\n        tableEl:          'table',\n        tableNameEl:      'header h3',\n        headerEl:         'thead',\n        hitEl:            'th.hit',\n        bodyEl:           'tbody',\n        inputsHeaderEl:   'thead tr:nth-child(1) th.input',\n        outputsHeaderEl:  'thead tr:nth-child(1) th.output',\n        labelsRowEl:      'thead tr.labels',\n        valuesRowEl:      'thead tr.values',\n        mappingsRowEl:    'thead tr.mappings',\n        controlsEl:       '[data-hook=\"controls\"]'\n      });\n\n\n      this.inputsHeaderEl.appendChild(makeAddButton('input', table));\n      this.outputsHeaderEl.appendChild(makeAddButton('output', table));\n    }\n\n\n    ['input', 'output'].forEach(function (type) {\n      this.listenToAndRun(this.model[type + 's'], 'add reset remove', function () {\n\n        var cols = this.model[type + 's'].length;\n        if (cols > 1) {\n          this[type + 'sHeaderEl'].setAttribute('colspan', cols);\n        }\n        else {\n          this[type + 'sHeaderEl'].removeAttribute('colspan');\n        }\n\n        this._headerClear(type);\n        this[type + 'ClauseViews'].forEach(function (view) {\n          view.remove();\n        }, this);\n\n        this.model[type + 's'].forEach(function (clause) {\n          var labelEl = makeTd(type);\n          var valueEl = makeTd(type);\n          var mappingEl = makeTd(type);\n\n          var view = new ClauseHeaderView({\n            labelEl:    labelEl,\n            valueEl:    valueEl,\n            mappingEl:  mappingEl,\n\n            model:      clause,\n            parent:     this\n          });\n\n          ['label', 'value', 'mapping'].forEach(function (kind) {\n            if (type === 'input') {\n              this[kind +'sRowEl'].insertBefore(view[kind + 'El'], this[kind +'sRowEl'].querySelector('.output'));\n            }\n            else {\n              this[kind +'sRowEl'].appendChild(view[kind + 'El']);\n            }\n          }, this);\n\n          this.registerSubview(view);\n\n          this[type + 'ClauseViews'].push(view);\n        }, this);\n      });\n    }, this);\n\n    this.bodyEl.innerHTML = '';\n    this.rulesView = this.renderCollection(this.model.rules, RuleView, this.bodyEl);\n\n    if (!this.controlsView) {\n      this.controlsView = new ControlsView({\n        parent: this,\n        el:     this.controlsEl\n      });\n    }\n\n    if (!this.footView) {\n      var footEl = this.query('tfoot');\n      if (footEl) { footEl.parentNode.removeChild(footEl); }\n\n      this.footView = new FootView({\n        model: this.model\n      });\n      this.tableEl.appendChild(this.footView.el);\n    }\n\n    if (this.el.classList.contains('scroll-enabled')) {\n      this.listenToAndRun(this.model.rules, 'all', this._resizeBody);\n      // window.addEventListener('resize', function () {\n      //   this._resizeBody();\n      // }.bind(this));\n    }\n    return this;\n  }\n});\n\nmodule.exports = DecisionTableView;\n",
    "'use strict';\n/* global require: false, module: false */\n\nvar DecisionTableView = require('./decision-table-view');\nrequire('./contextmenu-view');\nrequire('./clausevalues-setter-view');\nrequire('./clauseexpression-setter-view');\n\nmodule.exports = DecisionTableView;\n",
    "'use strict';\n/*global module: false, require: false*/\n\nvar Clause = require('./clause-data');\n\nvar InputModel = Clause.Model.extend({\n  clauseType: 'input',\n\n  props: {\n    source:      'string',\n    language:    {type: 'string', default: 'Javascript'},\n    mappingType: {\n      type: 'string',\n      default: 'expression',\n      test: function (newVal) {\n        if (newVal !== 'expression' && newVal !== 'script') {\n          return 'mappingType must be either \"script\" or \"expression\"';\n        }\n      }\n    }\n  },\n\n  derived: {\n    x: {\n      deps: [\n        'collection'\n      ],\n      cache: false,\n      fn: function () {\n        return this.collection.indexOf(this);\n      }\n    },\n\n    focused: {\n      deps: [\n        'collection',\n        'collection.parent'\n      ],\n      cache: false,\n      fn: function () {\n        return this.collection.parent.x === this.x;\n      }\n    },\n\n    mapping: {\n      deps: [\n        'expression',\n        'language',\n        'source'\n      ],\n      fn: function () {\n        if (this.mappingType === 'script') {\n          return this.language;\n        }\n\n        return this.expression;\n      }\n    }\n  }\n});\n\nmodule.exports = {\n  Model: InputModel,\n  Collection: Clause.Collection.extend({\n    model: InputModel\n  })\n};\n",
    "'use strict';\n/*jshint debug: true */\n/*global deps: false, module: false*/\n\nvar Events = deps('ampersand-events');\nvar keyBus = Events.createEmitter();\n\nvar keyCodes = {\n  9: 'tab',\n  27: 'esc',\n  13: 'enter',\n  16: 'shift',\n  17: 'ctrl',\n  18: 'alt',\n  32: 'space',\n  37: 'left',\n  38: 'up',\n  39: 'right',\n  40: 'down',\n  225: 'altgr'\n};\nkeyBus.keyCodes = keyCodes;\n\nkeyBus.keys = {};\nObject.keys(keyCodes).forEach(function (key) {\n  keyBus.keys[keyCodes[key]] = parseInt(key, 10);\n});\n\n['keyup', 'keydown', 'keypressed'].map(function (evtName) {\n  document.addEventListener(evtName, function (evt) {\n    var code = evt.which || evt.keyCode;\n    if (keyCodes[code]) {\n      keyBus.trigger(evtName + ':' + keyCodes[code], evt);\n    }\n    keyBus.trigger(evtName, evt);\n  });\n});\n\nmodule.exports = keyBus;\n",
    "'use strict';\n/*global module: false, require: false*/\n\nvar Clause = require('./clause-data');\n\nvar OutputModel = Clause.Model.extend({\n  clauseType: 'output',\n\n  derived: {\n    x: {\n      deps: [\n        'collection',\n        'collection.parent',\n        'collection.parent.inputs'\n      ],\n      cache: false,\n      fn: function () {\n        return this.collection.indexOf(this) + this.collection.parent.inputs.length;\n      }\n    },\n\n    focused: {\n      deps: [\n        'collection',\n        'collection.parent',\n        'collection.parent.inputs'\n      ],\n      cache: false,\n      fn: function () {\n        var table = this.collection.parent;\n        return table.x === this.collection.indexOf(this) + table.inputs.length;\n      }\n    }\n  }\n});\n\nmodule.exports = {\n  Model: OutputModel,\n  Collection: Clause.Collection.extend({\n    model: OutputModel\n  })\n};\n",
    "'use strict';\n/*global module: false, deps: true, require: false*/\n\nif (typeof window === 'undefined') { var deps = require; }\nelse { var deps = window.deps; }\n\nvar State = deps('ampersand-state');\nvar Collection = deps('ampersand-collection');\nvar Cell = require('./cell-data');\n\nvar RuleModel = State.extend({\n  collections: {\n    cells: Cell.Collection\n  },\n\n  derived: {\n    table: {\n      deps: [\n        'collection',\n        'collection.parent'\n      ],\n      cache: false,\n      fn: function () {\n        return this.collection.parent;\n      }\n    },\n\n    focused: {\n      deps: [\n        'collection',\n        'table'\n      ],\n      cache: false,\n      fn: function () {\n        return this.collection.indexOf(this) === this.table.y;\n      }\n    },\n\n\n    delta: {\n      deps: ['collection'],\n      cache: false,\n      fn: function () {\n        return 1 + this.collection.indexOf(this);\n      }\n    },\n\n    inputCells: {\n      deps: ['cells', 'table.inputs'],\n      cache: false,\n      fn: function () {\n        return this.cells.models.slice(0, this.table.inputs.length);\n      }\n    },\n\n    outputCells: {\n      deps: ['cells', 'table.inputs'],\n      cache: false,\n      fn: function () {\n        return this.cells.models.slice(this.table.inputs.length, -1);\n      }\n    },\n\n    annotation: {\n      deps: ['cells'],\n      cache: false,\n      fn: function () {\n        return this.cells.models[this.cells.length - 1];\n      }\n    }\n  },\n\n  ensureCells: function () {\n    var c = this.table.inputs.length + this.table.outputs.length + 1;\n\n    // fine\n    if (this.cells.length === c || c === 1) {\n      return;\n    }\n\n    // needs to be filled\n    if (this.cells.length < c) {\n      while (this.cells.length <= c) {\n        this.cells.add({value:''});\n      }\n    }\n\n    // needs to be truncated\n    else {\n      this.cells.models = this.cells.models.slice(0, c);\n    }\n  },\n\n  initialize: function () {\n    this.listenTo(this.table.inputs, 'reset', this.ensureCells);\n    this.listenToAndRun(this.table.outputs, 'reset', this.ensureCells);\n  }\n});\n\nmodule.exports = {\n  Model: RuleModel,\n\n  Collection: Collection.extend({\n    model: RuleModel,\n  })\n};\n",
    "'use strict';\n/* global require: false, module: false, deps: false */\n\nvar View = deps('ampersand-view');\nvar CellViews = require('./cell-view');\nvar merge = deps('lodash.merge');\nvar contextViewsMixin = require('./context-views-mixin');\n\nvar RuleView = View.extend({\n  template: '<tr><td class=\"number\"></td></tr>',\n\n  bindings: {\n    'model.delta': {\n      type: 'text',\n      selector: '.number'\n    }\n  },\n\n  derived: merge({}, contextViewsMixin, {\n    inputs: {\n      deps: [\n        'parent',\n        'parent.model',\n        'parent.model.inputs'\n      ],\n      cache: false,\n      fn: function () {\n        return this.parent.model.inputs;\n      }\n    },\n\n    outputs: {\n      deps: [\n        'parent',\n        'parent.model',\n        'parent.model.outputs'\n      ],\n      cache: false,\n      fn: function () {\n        return this.parent.model.outputs;\n      }\n    },\n\n    annotation: {\n      deps: [\n        'parent',\n        'parent.model',\n        'parent.model.annotations'\n      ],\n      fn: function () {\n        return this.parent.model.annotations.at(0);\n      }\n    }\n  }),\n\n  events: {\n    'contextmenu .number': '_handleRowContextMenu'\n  },\n\n  _handleRowContextMenu: function (evt) {\n    var rule = this.model;\n    var table = rule.collection.parent;\n\n    this.contextMenu.open({\n      parent:   this,\n      left:     evt.pageX,\n      top:      evt.pageY,\n      commands: [\n        {\n          label: 'Rule',\n          subcommands: [\n            {\n              label: 'add',\n              icon: 'plus',\n              fn: function () {\n                table.addRule(rule);\n              },\n              subcommands: [\n                {\n                  label: 'above',\n                  icon: 'above',\n                  hint: 'Add a rule above the focused one',\n                  fn: function () {\n                    table.addRule(rule, -1);\n                  }\n                },\n                {\n                  label: 'below',\n                  icon: 'below',\n                  hint: 'Add a rule below the focused one',\n                  fn: function () {\n                    table.addRule(rule, 1);\n                  }\n                }\n              ]\n            },\n            // {\n            //   label: 'copy',\n            //   icon: 'copy',\n            //   fn: function () {\n            //     table.copyRule(rule);\n            //   },\n            //   subcommands: [\n            //     {\n            //       label: 'above',\n            //       icon: 'above',\n            //       hint: 'Copy the rule above the focused one',\n            //       fn: function () {\n            //         table.copyRule(rule, -1);\n            //       }\n            //     },\n            //     {\n            //       label: 'below',\n            //       icon: 'below',\n            //       hint: 'Copy the rule below the focused one',\n            //       fn: function () {\n            //         table.copyRule(rule, 1);\n            //       }\n            //     }\n            //   ]\n            // },\n            {\n              label: 'remove',\n              icon: 'minus',\n              hint: 'Remove this rule',\n              fn: function () {\n                rule.collection.remove(rule);\n              }\n            },\n            {\n              label: 'clear',\n              icon: 'clear',\n              hint: 'Clear the focused rule',\n              fn: function () {\n                table.clearRule(rule);\n              }\n            }\n          ]\n        }\n      ]\n    });\n\n    evt.preventDefault();\n  },\n\n  setFocus: function () {\n    if (!this.el) { return; }\n\n    if (this.model.focused) {\n      this.el.classList.add('row-focused');\n    }\n    else {\n      this.el.classList.remove('row-focused');\n    }\n  },\n\n  initialize: function () {\n    var table = this.model.table;\n\n    this.listenToAndRun(table, 'change:focus', this.setFocus);\n    this.listenToAndRun(table.inputs, 'add remove reset', this.render);\n    this.listenToAndRun(table.outputs, 'add remove reset', this.render);\n  },\n\n  render: function () {\n    this.renderWithTemplate();\n\n    this.cacheElements({\n      numberEl: '.number'\n    });\n\n    var i;\n    var subview;\n\n    for (i = 0; i < this.inputs.length; i++) {\n      subview = new CellViews.Input({\n        model:  this.model.cells.at(i),\n        parent: this\n      });\n\n      this.registerSubview(subview.render());\n      this.el.appendChild(subview.el);\n    }\n\n    for (i = 0; i < this.outputs.length; i++) {\n      subview = new CellViews.Output({\n        model:  this.model.cells.at(this.inputs.length + i),\n        parent: this\n      });\n\n      this.registerSubview(subview.render());\n      this.el.appendChild(subview.el);\n    }\n    subview = new CellViews.Annotation({\n      model:  this.model.annotation,\n      parent: this\n    });\n    this.registerSubview(subview.render());\n    this.el.appendChild(subview.el);\n\n\n    this.setFocus();\n    return this;\n  }\n});\n\nmodule.exports = RuleView;\n",
    "'use strict';\n/* global module: false, deps: false */\n\nvar View = deps('ampersand-view');\nvar Collection = deps('ampersand-collection');\nvar State = deps('ampersand-state');\n\n\n\nvar SuggestionsCollection = Collection.extend({\n  model: State.extend({\n    props: {\n      value: 'string',\n      html: 'string'\n    }\n  })\n});\n\n\n\nvar SuggestionsItemView = View.extend({\n  template: '<li></li>',\n\n  bindings: {\n    'model.html': {\n      type: 'innerHTML'\n    }\n  },\n\n  events: {\n    click: '_handleClick'\n  },\n\n  _handleClick: function () {\n    if (!this.parent || !this.parent.parent) { return; }\n    var target = this.parent.parent;\n    \n    if (target.model && typeof target.model.value !== 'undefined') {\n      target.model.value = this.model.value;\n    }\n    else if (target.el) {\n      target.el.textContent = this.model.value;\n    }\n  }\n});\n\n\n\nvar SuggestionsView = View.extend({\n  session: {\n    visible: 'boolean'\n  },\n\n  bindings: {\n    visible: {\n      type: 'toggle'\n    }\n  },\n\n  template: '<ul class=\"dmn-suggestions-helper\"></ul>',\n\n  collections: {\n    suggestions: SuggestionsCollection\n  },\n\n  setPosition: function () {\n    if (!this.parent || !this.parent.el) {\n      this.visible = false;\n      return;\n    }\n\n    var node = this.parent.el;\n    var top = node.offsetTop;\n    var left = node.offsetLeft;\n    var helper = this.el;\n\n    while ((node = node.offsetParent)) {\n      if (node.offsetTop) {\n        top += parseInt(node.offsetTop, 10);\n      }\n      if (node.offsetLeft) {\n        left += parseInt(node.offsetLeft, 10);\n      }\n    }\n\n    top -= helper.clientHeight;\n    helper.style.top = top +'px';\n    helper.style.left = left +'px';\n  },\n\n  show: function (suggestions, parent, force) {\n    if (parent) {\n      this.parent = parent;\n    }\n\n    if (suggestions) {\n      if (suggestions.isCollection) {\n        instance.suggestions = suggestions;\n      }\n      else {\n        instance.suggestions.reset(suggestions);\n      }\n      \n      instance.visible = force || suggestions.length > 1;\n    }\n    else {\n      instance.visible = false;\n    }\n\n    if (instance.visible) {\n      this.setPosition();\n    }\n\n    return this;\n  },\n\n  hide: function () {\n    return this.show([], this.parent);\n  },\n\n  render: function () {\n    this.renderWithTemplate();\n    this.renderCollection(this.suggestions, SuggestionsItemView, this.el);\n    return this;\n  }\n});\n\n\n\nvar instance;\nSuggestionsView.instance = function (suggestions, parent) {\n  if (!instance) {\n    instance = new SuggestionsView({});\n    instance.render();\n  }\n\n  if (!document.body.contains(instance.el)) {\n    document.body.appendChild(instance.el);\n  }\n\n  instance.show(suggestions, parent);\n\n  return instance;\n};\n\n\nSuggestionsView.Collection = SuggestionsCollection;\n\nmodule.exports = SuggestionsView;\n",
    "'use strict';\n/*global module: false, deps: true, require: false, console: false*/\n\nif (typeof window === 'undefined') { var deps = require; }\nelse { var deps = window.deps; }\n\n\nvar State = deps('ampersand-state');\nvar Input = require('./input-data');\nvar Output = require('./output-data');\n\nvar Rule = require('./rule-data');\n\nvar defaults = require('lodash.defaults');\n\nvar DecisionTableModel = State.extend({\n  collections: {\n    inputs:   Input.Collection,\n    outputs:  Output.Collection,\n    rules:    Rule.Collection\n  },\n\n  props: {\n    name: 'string'\n  },\n\n  session: {\n    x: {\n      type: 'number',\n      default: 0\n    },\n\n    y: {\n      type: 'number',\n      default: 0\n    },\n\n\n    logLevel: {\n      type: 'number',\n      default: 0\n    }\n  },\n\n  initialize: function () {\n    var table = this;\n    [\n      'inputs',\n      'outputs',\n      'rules'\n    ].forEach(function (collectionName) {\n      [\n        'add',\n        'remove',\n        'sort',\n        'reset'\n      ].forEach(function (evtName) {\n        table.listenTo(table[collectionName], evtName, function (arg1, arg2, arg3) {\n          table.trigger(collectionName + ':' + evtName, arg1, arg2, arg3);\n        });\n      });\n    });\n\n    this.listenToAndRun(this.inputs, 'remove reset', function () {\n      if (this.inputs.length) { return; }\n      this.inputs.add({});\n    });\n\n    this.listenToAndRun(this.outputs, 'remove reset', function () {\n      if (this.outputs.length) { return; }\n      this.outputs.add({});\n    });\n  },\n\n  log: function () {\n    var args = Array.prototype.slice.apply(arguments);\n    var method = args.shift();\n    args.unshift(this.cid);\n    console[method].apply(console, args);\n  },\n\n  _ruleClipboard: null,\n\n\n  addRule: function (scopeCell, beforeAfter) {\n    var cells = [];\n    var c;\n\n    for (c = 0; c < this.inputs.length; c++) {\n      cells.push({\n        value: '',\n        // choices: this.inputs.at(c).choices,\n        focused: c === 0\n      });\n    }\n\n    for (c = 0; c < this.outputs.length; c++) {\n      cells.push({\n        value: '',\n        // choices: this.outputs.at(c).choices\n      });\n    }\n\n    cells.push({\n      value: ''\n    });\n\n    var options = {};\n    if (beforeAfter) {\n      var ruleDelta = this.rules.indexOf(scopeCell.collection.parent);\n      options.at = ruleDelta + (beforeAfter > 0 ? ruleDelta : (ruleDelta - 1));\n    }\n\n    this.rules.add({\n      cells: cells\n    }, options);\n\n    return this;\n  },\n\n  removeRule: function (scopeCell) {\n    this.rules.remove(scopeCell.collection.parent);\n    this.rules.trigger('reset');\n    return this;\n  },\n\n\n  copyRule: function (scopeCell, upDown) {\n    var rule = scopeCell.collection.parent;\n    if (!rule) { return this; }\n    this._ruleClipboard = rule;\n\n    if (upDown) {\n      var ruleDelta = this.rules.indexOf(rule);\n      this.pasteRule(ruleDelta + (upDown > 1 ? 0 : 1));\n    }\n\n    return this;\n  },\n\n\n  pasteRule: function (delta) {\n    if (!this._ruleClipboard) { return this; }\n    var data = this._ruleClipboard.toJSON();\n    this.rules.add(data, {\n      at: delta\n    });\n    return this;\n  },\n\n\n  clearRule: function (rule) {\n    rule.cells.forEach(function (cell) {\n      cell.value = '';\n    });\n    return this;\n  },\n\n\n  _rulesCells: function (added, delta) {\n    this.rules.forEach(function (rule) {\n      rule.cells.add({\n        // choices: added.choices\n      }, {\n        at: delta,\n        silent: true\n      });\n    });\n\n    this.rules.trigger('reset');\n  },\n\n  addInput: function (data, position) {\n    var delta = typeof position !== 'undefined' ? position : this.inputs.length;\n    delta = delta < 0 ? 0 : delta;\n\n    var input = {};\n    defaults(input, data, {\n      label:    null,\n      choices:  null,\n      mapping:  null,\n      datatype: 'string'\n    });\n\n    var newModel = this.inputs.add(input, {\n      at: delta\n    });\n\n    this._rulesCells(newModel, newModel.collection.indexOf(newModel));\n\n    return this;\n  },\n\n  removeInput: function () {\n    return this;\n  },\n\n\n\n  addOutput: function (data, position) {\n    var delta = typeof position !== 'undefined' ? position : this.outputs.length;\n    delta = delta < 0 ? 0 : delta;\n\n    var output = {};\n    defaults(output, data, {\n      label:    null,\n      choices:  null,\n      mapping:  null,\n      datatype: 'string'\n    });\n\n    var newModel = this.outputs.add(output, {\n      at: delta\n    });\n\n    this._rulesCells(newModel, newModel.collection.indexOf(newModel));\n\n    return this;\n  },\n\n  removeOutput: function () {\n    return this;\n  }\n});\n\nif (typeof window !== 'undefined') {\n  window.DecisionTableModel = DecisionTableModel;\n}\n\nmodule.exports = {\n  Model: DecisionTableModel\n};\n"
  ]
}